(this["webpackJsonpwowo-cs473"]=this["webpackJsonpwowo-cs473"]||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(1),s=n.n(c),o=n(28),i=n.n(o),r=(n(165),n(166),n(20)),l=n(21),d=n(23),u=n(22),j=n(12),b=n(18),h=n(370),m=n(371),p=n(62);p.a.initializeApp({apiKey:"AIzaSyABT6_9hUpFXDFyIcPP-0BughuUygsVNyw",authDomain:"wowo-cs473.firebaseapp.com",databaseURL:"https://wowo-cs473.firebaseio.com",projectId:"wowo-cs473",storageBucket:"wowo-cs473.appspot.com",messagingSenderId:"27132694397",appId:"1:27132694397:web:b0a40d962ba53488ff8614",measurementId:"G-S0YXCKXKYH"});new p.a.auth.GoogleAuthProvider;var x=p.a.auth(),O=p.a,g=(n(171),n(10)),f=n(357),w=n(372),v=n(152),y=n(373),S={exerciseButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",borderColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",color:"#41ABFF",display:"inline-block"}},C=function(){return Object(a.jsx)(j.c,{to:"main/workout",children:Object(a.jsx)("button",{type:"button",className:"btn",style:S.exerciseButton,children:"Exercise!"})})},N=n.p+"static/media/BlueCalendar.03754e7c.png",k={align:{textAlign:"center",height:"600px",width:"100%",display:"flex",flexDirection:"column"},calendar:{margin:"10px 0 50px 0"}},F=function(){return Object(a.jsxs)("div",{style:k.align,children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:N,alt:"calendar",style:k.calendar})}),Object(a.jsx)(C,{})]})},D=n(50),E=n.n(D),A=n(27),B=n(76),I=function(e){var t=e.crewdata,n=Object(c.useState)(null),s=Object(g.a)(n,2),o=s[0],i=s[1];return Object(c.useEffect)((function(){setTimeout((function(){t.sort((function(e,t){return e.points<t.points})),i(t)}),300)}),[i,t]),Object(a.jsx)("div",{className:"leaderboard",style:{textAlign:"center"},children:o&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{children:o.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{children:[e.username," : ",e.points]})},e.username)}))}),Object(a.jsx)("button",{onClick:function(){return e.onSubmit(!1)},children:"Close"})]})})},P=(n(177),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},a.state={chats:[]},a.messagesEnd=s.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.database().ref(this.props.chatRefType).on("value",(function(t){var n=t.val(),a=[];for(var c in n)""!==n[c].message&&a.push({id:c,message:n[c].message,user:n[c].user,date:n[c].timestamp,isMe:n[c].user===e.props.currentUserName});var s=a;e.setState({chats:s})})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"chatbox",style:{height:"450px",overflow:"auto"},children:[Object(a.jsx)("ul",{className:"chat-list",children:this.state.chats.map((function(e){new Date(e.date);return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{className:e.isMe?"mymsg":"othermsg",children:[!e.isMe&&Object(a.jsx)("strong",{children:e.user+": "}),e.message]})},e.id)}))}),Object(a.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})}}]),n}(s.a.Component)),U=(n(178),O.firestore()),L={background:{position:"fixed",zIndex:"1",width:"433px",height:"600px",backgroundColor:"rgba(0, 0, 0, 0.25)"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"}},T=function(e){var t=Object(c.useState)(""),n=Object(g.a)(t,2),s=n[0],o=n[1],i=Object(c.useState)(e.crew),r=Object(g.a)(i,2),l=r[0],d=r[1],u=Object(c.useState)([]),b=Object(g.a)(u,2),h=b[0],m=b[1],p=Object(c.useState)(""),x=Object(g.a)(p,2),f=x[0],w=x[1],v=Object(c.useState)(!1),y=Object(g.a)(v,2),S=y[0],C=y[1],N=Object(c.useState)([]),k=Object(g.a)(N,2),F=k[0],D=k[1],T=function(e){var t=e.item;return Object(a.jsxs)("article",{className:"mini-card",onClick:function(){return t.availability?_(t.crewID):void alert("Selected crew is full now!")},children:[Object(a.jsx)("div",{children:t.crewID}),Object(a.jsxs)("div",{children:[t.members.length," / ",t.member_limit," "]})]})},M=function(e){var t=e.list;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)(T,{item:e},e.crewID)}))})},R=function(e){var t=U.collection("users"),n=[];U.collection("crews").doc(e).get().then((function(e){e.data().members.forEach((function(e){t.doc(e).get().then((function(e){return n.push({username:e.data().username,points:e.data().points})}))})),D(n),C(!S)}))},z=function(e){return Object(a.jsx)("div",{style:L.background,children:Object(a.jsx)("div",{style:L.popup,children:Object(a.jsx)(I,{onSubmit:e.closePopup,crewdata:e.crewdata})})})},_=function(e){var t=O.auth().currentUser;U.collection("users").doc(t.uid).update({crew:e}).then((function(){console.log("Document updated")})).catch((function(e){console.error("Error adding document: ",e)})),U.collection("crews").doc(e).update({members:O.firestore.FieldValue.arrayUnion(t.uid)}),d(e),w(e)};return Object(c.useEffect)((function(){return function(){var e=Object(B.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.collection("crews").get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=!0;e.data().member_limit===e.data().members.length&&(t=!1),m((function(n){return[].concat(Object(A.a)(n),[{crewID:e.data().crewid,member_limit:e.data().member_limit,members:e.data().members,availability:t}])}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),e.crew&&(w(e.crew),d(e.crew)),function(){}}),[]),!e.crew&&!l||f||w(e.crew),Object(a.jsxs)("div",{className:"home--container",children:[S&&Object(a.jsx)(z,{closePopup:C,crewdata:F}),e.user&&(l||e.crew)&&Object(a.jsxs)("div",{className:"allow-chat",children:[Object(a.jsx)("button",{onClick:function(){R(l)},children:"Go to Leaderboard"}),Object(a.jsx)(P,{chatRefType:f,currentUserName:e.user.displayName}),Object(a.jsx)("form",{className:"send-chat",onSubmit:function(t){if(t.preventDefault(),""!==s){var n=O.database().ref(f),a={message:s,user:e.user.displayName,timestamp:(new Date).getTime()};n.push(a),o("")}},children:Object(a.jsx)("input",{type:"text",name:"message",id:"message",value:s,onChange:function(e){o(e.target.value)},placeholder:"Leave a message..."})})]}),e.user&&!(l||e.crew)&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsx)(M,{list:h})}),!e.user&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsxs)("p",{children:[Object(a.jsx)(j.b,{to:"/login",children:"Login"})," or ",Object(a.jsx)(j.b,{to:"/register",children:"Register"})," to start chatting!"]})})]})},M=n(134),R=n(135),z=n.n(R),_=(n(179),n(136));function G(){var e=Object(_.a)(["\ntext-align: center;\n.lds-ellipsis {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-ellipsis div {\n  position: absolute;\n  top: 33px;\n  width: 13px;\n  height: 13px;\n  border-radius: 50%;\n  background: #222;\n  animation-timing-function: cubic-bezier(0, 1, 1, 0);\n}\n.lds-ellipsis div:nth-child(1) {\n  left: 8px;\n  animation: lds-ellipsis1 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(2) {\n  left: 8px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(3) {\n  left: 32px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(4) {\n  left: 56px;\n  animation: lds-ellipsis3 0.6s infinite;\n}\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(24px, 0);\n  }\n}\n"]);return G=function(){return e},e}var W=n(137).a.div(G()),Y=function(){return Object(a.jsx)(W,{children:Object(a.jsxs)("div",{className:"lds-ellipsis",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})},V=(n(180),function(e){var t=Object(c.useState)("Default Title"),n=Object(g.a)(t,2),s=n[0],o=n[1],i=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),r=Object(g.a)(i,2),l=r[0],d=r[1];return Object(c.useEffect)((function(){var t;void 0!==(t=e.info.data).title&&o(t.title),function(e){void 0!==e.imgPath&&d(e.imgPath)}(e.info.data)}),[]),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-md-12 px-0",children:Object(a.jsxs)("div",{className:"rounded-lg overflow-hidden",children:[Object(a.jsx)(j.c,{to:{pathname:"/wowo-cs473/post/detail",state:e.info},children:Object(a.jsx)("img",{src:l,alt:e.info.id,className:"img-fluid"})}),Object(a.jsxs)("div",{className:"postDescription",children:[s,Object(a.jsxs)("span",{className:"postlikes",children:["\u2665",e.info.data.whoLikes.length]})]})]})})})}),H=n(356),J=function(){var e=Object(c.useState)([]),t=Object(g.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)([]),i=Object(g.a)(o,2),r=i[0],l=i[1],d=Object(c.useState)(!0),u=Object(g.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(0),p=Object(g.a)(m,2),x=p[0],f=p[1];Object(c.useEffect)((function(){w()}),[]);var w=function(){O.firestore().collection("posts").get().then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),t.sort((function(e,t){return e.data.timestamp>t.data.timestamp?-1:e.data.timestamp<t.data.timestamp?1:0})),console.log("ALL : ",t),l(t);var n,a=10*x;t.length>=a+10?(n=t.slice(a,a+10),s((function(e){return[].concat(Object(A.a)(e),Object(A.a)(n))})),f((function(e){return e+1})),console.log("loadPosts_IF : ",n)):(n=t.slice(a),s((function(e){return[].concat(Object(A.a)(e),Object(A.a)(n))})),h(!1),console.log("loadPosts_ELSE : ",n))}))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"container-SearchCreate",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(j.c,{to:"/wowo-cs473/post/create",children:[" ",Object(a.jsx)(H.a,{className:"createButton",children:"Create"})," "]})}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{placeholder:"Search",className:"searchBar",onChange:function(e){var t=r.filter((function(t){return t.data.title.toLowerCase().includes(e.target.value.toLowerCase())}));s(t),h(!1)}})})]}),Object(a.jsx)("div",{id:"scrollableDiv",className:"scroll-container",children:Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)(M.a,{scrollableTarget:"scrollableDiv",dataLength:n.length,next:w,hasMore:b,loader:Object(a.jsx)(Y,{}),children:Object(a.jsx)(z.a,{breakpointCols:{default:2},className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return Object(a.jsx)(V,{info:e},e.id)}))})})})})]})},K=(n(181),n.p+"static/media/demo_calendar.10b69a79.jpeg"),X={align:{textAlign:"center",height:"520px",width:"90%"}},Q=function(e){var t=e.color;return Object(a.jsx)("hr",{style:{color:t,backgroundColor:t,height:1}})},q=function(){return Object(a.jsx)("div",{className:"calendar_img",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("h2",{id:"ubuntuFont",className:"titleCalendar",children:"Calendar"}),Object(a.jsx)(Q,{color:"gray"}),Object(a.jsx)("img",{src:K,style:X.align,alt:""})]})})},Z=n(26),$=n(37),ee=(n(112),c.Component,n(223),c.Component,n.p+"static/media/demoProfile.bb598ad7.png"),te=O.firestore(),ne={align:{backgroundColor:"white",textAlign:"center",height:"600px",width:"100%",display:"flex",flexDirection:"column"},profileImg:{width:"150px",height:"150px",resizeMode:"contain",margin:"10px 0 0 0"}},ae=function(e){var t=e.color;return Object(a.jsx)("hr",{style:{color:t,backgroundColor:t,height:1}})},ce=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).userList=null,e.state={username:"AmonGus",email:"amongus@gmail.com",gender:"Female",birth:"991225",crew:"Imposters",points:"100",profileImgPath:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=O.auth().currentUser,n=te.collection("users").doc(t.uid);console.log("users",n.data),te.collection("users").doc(t.uid).get().then((function(t){console.log("find it!: ",t.data()),console.log("Name1",t.data().username),e.setState(Object(Z.a)(Object(Z.a)({},e.state),{},{username:t.data().username,email:t.data().email,crew:t.data().crew,points:t.data().points}))})).catch((function(e){console.error("Error getting document: ",e)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{style:{height:"600px",width:"433px",textAlign:"center"},children:[Object(a.jsx)("h2",{id:"ubuntuFont",className:"titleProfile",children:"Profile"}),Object(a.jsx)(ae,{color:"gray"}),Object(a.jsxs)("div",{className:"profile-box",children:[Object(a.jsx)("img",{src:ee,alt:"",style:ne.profileImg}),Object(a.jsx)("h2",{id:"ubuntuSmallBold",className:"name",children:this.state.username}),Object(a.jsx)("h2",{id:"ubuntuSmallBlack",children:this.state.email}),Object(a.jsxs)("h2",{id:"ubuntuSmallPink",children:["Crew: ",this.state.crew," | Points: ",this.state.points]})]}),Object(a.jsx)(ae,{color:"gray"})]})}}]),n}(s.a.Component),se=n(358),oe=n(360),ie=n(361),re=n(362),le=n(363),de=n(364),ue=n(365),je=(n(224),n.p+"static/media/wowo_logo.207fea00.png"),be=O.firestore(),he={fixSize:{height:"600px"},navigation:{backgroundColor:"#EEEEEE"}},me=function(e){var t,n=Object(c.useState)(null),s=Object(g.a)(n,2),o=s[0],i=s[1],r=Object(c.useState)(e.index||"0"),l=Object(g.a)(r,2),d=l[0],u=l[1];return e.user&&(t=e.user.uid,be.collection("users").doc(t).get().then((function(e){null!=e.data().crew?i(e.data().crew):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)})),console.log(e.user.uid),console.log(e.user)),Object(a.jsx)(a.Fragment,{children:e.user&&Object(a.jsxs)(f.a,{lg:3.5,md:5.5,sm:7.5,children:[Object(a.jsxs)(w.a,{bg:"light",expand:"sm",align:"center",className:"navbar-custom",children:[Object(a.jsx)(v.a,{className:"navbar-brand",to:"/wowo-cs473/main",children:Object(a.jsx)("div",{className:"logo-image",children:Object(a.jsx)("img",{src:je,className:"img-fluid"})})}),Object(a.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(w.a.Collapse,{id:"basic-navbar-nav",style:{flexDirection:"row"},children:Object(a.jsx)(y.a,{className:"ml-auto",children:Object(a.jsx)(v.a,{onClick:function(){return O.auth().signOut()},to:"/wowo-cs473/login",children:"Logout"})})})]}),Object(a.jsx)(b.a,{path:"/wowo-cs473/main",component:F}),Object(a.jsx)(b.a,{path:"/wowo-cs473/crew",component:function(){return Object(a.jsx)(T,{user:e.user,crew:o})}}),Object(a.jsx)(b.a,{path:"/wowo-cs473/hunsu",component:J}),Object(a.jsx)(b.a,{path:"/wowo-cs473/calendar",component:q}),Object(a.jsx)(b.a,{path:"/wowo-cs473/info",component:function(){return Object(a.jsx)(ce,{user:e.user})}}),Object(a.jsxs)(se.a,{style:he.navigation,value:d,onChange:function(e,t){u(t)},showLabels:!0,children:[Object(a.jsx)(oe.a,{component:j.b,to:"/wowo-cs473/main",label:"Main",value:"0",icon:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(oe.a,{component:j.b,to:"/wowo-cs473/crew",label:"Crew",value:"1",icon:Object(a.jsx)(re.a,{})}),Object(a.jsx)(oe.a,{component:j.b,to:"/wowo-cs473/hunsu",label:"Hunsu",value:"2",icon:Object(a.jsx)(le.a,{})}),Object(a.jsx)(oe.a,{component:j.b,to:"/wowo-cs473/calendar",label:"Calendar",value:"3",icon:Object(a.jsx)(de.a,{})}),Object(a.jsx)(oe.a,{component:j.b,to:"/wowo-cs473/info",label:"Profile",value:"4",icon:Object(a.jsx)(ue.a,{})})]})]})})},pe=n(48),xe=(n(113),{fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}}),Oe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(pe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.password;O.auth().signInWithEmailAndPassword(n,c).then((function(e){a.props.history.push("/wowo-cs473/main")})).catch((function(e){a.setState({error:e})}))},a.state={email:"",password:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,c=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:xe.fixSize,children:[Object(a.jsx)("h2",{style:xe.margin,children:"Login your account"}),c&&Object(a.jsx)("p",{className:"error-message",children:c.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Enter password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",value:n,style:xe.margin,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:xe.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)(j.b,{className:"register-btn",to:"/wowo-cs473/register",children:"Register here"})]})]})]})}}]),n}(s.a.Component),ge=O.firestore(),fe={fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}},we=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(pe.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.username,s=t.password,o=t.gender,i=t.birth;O.auth().createUserWithEmailAndPassword(n,s).then((function(){var e=O.auth().currentUser;e.updateProfile({displayName:c}).then((function(){ge.collection("users").doc(e.uid).set({username:c,email:n,gender:o,birth:i,profileImgPath:"/ProfileImg/demoProfile.png",crew:null,points:0,createdAt:new Date}).then((function(){console.log("Document written")})).catch((function(e){console.error("Error adding document: ",e)})),a.props.history.push("/wowo-cs473/main")})).catch((function(e){a.setState({error:e})}))})).catch((function(e){a.setState({error:e})}))},a.state={username:"",email:"",password:"",gender:"",birth:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.username,c=e.password,s=e.gender,o=e.birth,i=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:fe.fixSize,children:[Object(a.jsx)("h2",{style:fe.margin,children:"Register your account"}),i&&Object(a.jsx)("p",{className:"error-message",children:i.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",value:n,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Choose a password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",style:fe.margin,value:c,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(a.jsxs)("select",{value:s,onChange:this.handleChange,children:[Object(a.jsx)("option",{value:"Female",children:"Female"}),Object(a.jsx)("option",{value:"Male",children:"Male"})]}),Object(a.jsx)("label",{htmlFor:"birth",children:"Birth (YYMMDD)"}),Object(a.jsx)("input",{type:"text",name:"birth",id:"birth",value:o,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:fe.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)(j.b,{className:"login-btn",to:"/wowo-cs473/login",children:"Login here"})]})]})]})}}]),n}(s.a.Component),ve=n(82),ye=n.n(ve),Se=(n(329),n(330),function(){var e=Object(c.useState)(""),t=Object(g.a)(e,2),n=t[0],s=t[1],o=Object(c.useState)(""),i=Object(g.a)(o,2),r=i[0],l=i[1],d=Object(c.useState)(""),u=Object(g.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(""),p=Object(g.a)(m,2),x=p[0],f=p[1],w=Object(c.useState)(""),v=Object(g.a)(w,2),y=v[0],S=v[1],C=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),N=Object(g.a)(C,2),k=N[0],F=N[1],D=O.database(),A=O.firestore(),I=O.auth().currentUser;A.collection("users").doc(I.uid).get().then((function(e){console.log("user : ",e.data().username),S(e.data().username)}));var P=O.firestore.FieldValue.increment(2),U=function(){var e=Object(B.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n,void 0!==(t=r)&&""!==t){e.next=5;break}return alert("Write the title"),e.abrupt("return");case 5:A.collection("users").doc(I.uid).get().then((function(e){A.collection("users").doc(I.uid).update({points:P}),D.ref().child(e.data().crew).push({message:y+" wrote a new post / Title : "+r,user:"system",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),O.firestore().collection("posts").add({writer:y,title:t,content:a,imgPath:k,timestamp:new Date,whoLikes:[],comments:[]}).then((function(e){console.log("New Post Created : ",e.id),alert("You got 2 points!"),window.location.href="/wowo-cs473/hunsu"})).catch((function(e){console.log("New Posting Failed : ",e),alert("Posting Failed")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=null;return L=""!==b?Object(a.jsx)("img",{className:"profile_preview",src:x,alt:r}):Object(a.jsxs)("div",{className:"empty",children:[" ",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{})," Click to upload image"]}),Object(a.jsxs)("div",{className:"create",children:[Object(a.jsx)("h4",{children:"Create New Posts!"}),Object(a.jsx)("h5",{className:"description",children:"Title"}),Object(a.jsx)("input",{type:"text",className:"title",onChange:function(e){l(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h5",{className:"description",children:"Image"}),Object(a.jsx)("label",{htmlFor:"input",className:"img-holder",children:L}),Object(a.jsx)("input",{id:"input",type:"file",accept:"image/jpg, image/png, image/jpeg, image/gif",name:"image-upload",onChange:function(e){e.preventDefault();var t=new FileReader,n=b,a=e.target.files[0];t.onloadend=function(){h(a),f(t.result),O.storage().ref("postImages").child(a.name).put(a).then((function(e){e.ref.getDownloadURL().then((function(e){F(e)}))}))},void 0!==a?t.readAsDataURL(a):(h(n),alert("Canceled changing image"),console.log(b))}}),Object(a.jsx)("h5",{className:"description",children:"Content"}),Object(a.jsx)(ye.a,{theme:"bubble",className:"editor",value:n,onChange:s})]}),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsx)(H.a,{onClick:U,className:"button",children:" Save "}),Object(a.jsxs)(j.c,{to:"/wowo-cs473/hunsu",children:[" ",Object(a.jsx)(H.a,{className:"button",children:" Quit "})," "]})]})]})}),Ce=(n(331),n(376)),Ne=n(366),ke=n(369),Fe=n(367),De=n(374),Ee=n(368),Ae=n(88),Be=n(147),Ie=n.n(Be),Pe=n(148),Ue=n.n(Pe),Le=n(375),Te=n(149),Me=n.n(Te),Re=n(11),ze=n(146),_e=n.n(ze),Ge=function(e){var t=Object(c.useState)(""),n=Object(g.a)(t,2),s=n[0],o=n[1],i=Object(c.useState)(""),r=Object(g.a)(i,2),l=r[0],d=r[1],u=Object(c.useState)(""),j=Object(g.a)(u,2),b=j[0],h=j[1],m=Object(c.useState)(""),p=Object(g.a)(m,2),x=p[0],f=p[1],w=Object(c.useState)(""),v=Object(g.a)(w,2),y=v[0],S=v[1],C=Object(c.useState)((new Date).toString()),N=Object(g.a)(C,2),k=N[0],F=N[1],D=Object(c.useState)(""),E=Object(g.a)(D,2),B=E[0],I=E[1],P=Object(c.useState)(""),U=Object(g.a)(P,2),L=U[0],T=U[1],M=Object(c.useState)(!1),R=Object(g.a)(M,2),z=R[0],_=R[1],G=Object(c.useState)([]),W=Object(g.a)(G,2),Y=W[0],V=W[1],H=Object(c.useState)([]),J=Object(g.a)(H,2),K=J[0],X=J[1],Q=O.firestore().collection("posts");Object(c.useEffect)((function(){O.firestore().collection("users").doc(O.auth().currentUser.uid).get().then((function(e){console.log("user : ",e.data().username),I(e.data().username),T(e.data().crew)})),Q.doc(e.location.state.id).get().then((function(e){o(e.id),d(e.data().writer[0].toUpperCase()),h(e.data().title),f(e.data().content),S(e.data().imgPath),F(e.data().timestamp.toDate().toString().slice(0,15)),X(e.data().whoLikes);for(var t=e.data().comments,n=function(){var e=t[a],n={authorUrl:e.authorUrl,avatarUrl:e.avatarUrl,createdAt:e.createdAt.toDate(),fullName:e.fullName,text:e.text};V((function(e){return[].concat(Object(A.a)(e),[n])}))},a=0;a<t.length;a++)n()}))}),[]);var q={btn:function(e){return Object(Z.a)(Object(Z.a)({},e),{},{background:"#123456"})},comment:function(e){return Object(Z.a)({},e)},textarea:function(e){return Object(Z.a)({},e)}};return Object(a.jsxs)("div",{style:{height:"600px",width:"350px",borderColot:"black"},children:[Object(a.jsxs)(Ce.a,{className:"root",children:[Object(a.jsx)(Ne.a,{avatar:Object(a.jsxs)(De.a,{className:"avatar",children:[" ",l," "]}),title:Object(a.jsx)("span",{className:"title",children:b}),subheader:Object(a.jsx)("span",{className:"createdAt",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"postdetailcrewname",children:L}),Object(a.jsx)("div",{className:"postdetailtimestamp",children:k})]})})}),Object(a.jsx)("img",{src:y,alt:s,className:"img-fluid"}),Object(a.jsxs)(Fe.a,{disableSpacing:!0,children:[K.includes(B)?Object(a.jsx)(Ee.a,{"aria-label":"remove from favorites",onClick:function(){var t=K.filter((function(e){return e!==B}));console.log("Removed ARRAY: ",t),X(t),Q.doc(e.location.state.id).update({whoLikes:t})},children:Object(a.jsx)(Ie.a,{})}):Object(a.jsx)(Ee.a,{"aria-label":"add to favorites",onClick:function(){console.log("push like : ",B),Q.doc(e.location.state.id).update({whoLikes:[].concat(Object(A.a)(K),[B])}),X((function(e){return[].concat(Object(A.a)(e),[B])}))},children:Object(a.jsx)(Ue.a,{})}),K.length,Object(a.jsx)(Ee.a,{className:Object(Re.a)("expand",{expandOpen:z}),onClick:function(){_(!z)},"aria-expanded":z,"aria-label":"show more",children:Object(a.jsx)(Me.a,{})})]}),Object(a.jsx)(Le.a,{in:z,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(ke.a,{children:Object(a.jsx)(Ae.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(a.jsx)(ye.a,{theme:"bubble",className:"editor",value:x,readOnly:!0})})})})]}),Object(a.jsx)("div",{className:"commentBlock",style:{height:"300px",width:"100%",overflow:"auto"},children:Object(a.jsx)("div",{className:"realcomments",children:Object(a.jsx)(_e.a,{comments:Y,signinUrl:"/login",isLoggedIn:!0,styles:q,onSubmit:function(t){t.length>0?(!function(t){var n={authorUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",avatarUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",createdAt:new Date,fullName:B+" - "+L,text:t};V([].concat(Object(A.a)(Y),[n])),Q.doc(e.location.state.id).update({comments:[].concat(Object(A.a)(Y),[n])})}(t),console.log("submit:",t)):alert("No comments written")}})})})]})},We=n(150),Ye={background:{position:"fixed",zIndex:"1",width:"400px",height:"700px",backgroundColor:"rgba(0, 0, 0, 0.25)",textAlign:"center"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"},upload:{border:"1px solid lightGrey",padding:"10px 10px 10px 10px",marginTop:"10px",marginBottom:"10px",backgroundColor:"#EEEEEE"},btnShare:{width:"100%",marginTop:"10px",marginBottom:"5px",background:"#41ABFF",borderColor:"none",color:"white"},btnCancel:{width:"100%",background:"white",borderColor:"#41ABFF",color:"#41ABFF"}},Ve=O.firestore(),He=O.database(),Je=function(e){var t=O.auth().currentUser,n=parseInt(e.timeSpent/1e3/60/60),c=parseInt(e.timeSpent/1e3/60),s=parseInt(e.timeSpent/1e3),o="[SYSTEM] "+t.displayName+" worked out for "+function(e,t,n){var a=n+" sec.";return 0===e&&0===t?a:0===e?t+" min "+a:e+" hour "+t+" min "+a}(n,c,s);return Object(a.jsx)("div",{style:Ye.background,children:Object(a.jsxs)("div",{style:Ye.popup,children:[Object(a.jsx)("h2",{children:"Great Job!"}),Object(a.jsx)("div",{children:"Would you share this exercise record with your Crew?"}),Object(a.jsx)("div",{style:Ye.upload,children:o}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.c,{to:"/wowo-cs473/crew",children:Object(a.jsx)(H.a,{style:Ye.btnShare,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e),Ve.collection("users").doc(t.uid).update({workoutHistory:O.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){Ve.collection("users").doc(t.uid).get().then((function(e){console.log("find it!: ",e.data()),He.ref().child(e.data().crew).push({message:o,user:"system",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Share"})}),Object(a.jsx)(j.c,{to:"/wowo-cs473/main",children:Object(a.jsx)(H.a,{style:Ye.btnCancel,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e);var t=O.auth().currentUser;Ve.collection("users").doc(t.uid).update({workoutHistory:O.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Cancel"})})]})]})})},Ke={stopwatch:{fontStyle:"italic",fontSize:"50px",fontWeight:"bold",marginTop:"200px"},beforeMargin:{marginTop:"20vh"},afterMargin:{marginTop:"50vh"},doneButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",backgroundColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",fontStyle:"italic",color:"#FFFFFF"},fixSize:{height:"600px",width:"100%",textAlign:"center"}},Xe=function(e){var t=Object(c.useState)(0),n=Object(g.a)(t,2),s=n[0],o=n[1],i=Object(c.useState)(!1),r=Object(g.a)(i,2),l=r[0],d=r[1],u=(new Date).getTime();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{lg:4,md:6,sm:8,children:Object(a.jsxs)("div",{style:Ke.fixSize,children:[!l&&Object(a.jsx)(We.a,{seconds:0,minutes:0,hours:0,render:function(e){var t=e.formatted;return Object(a.jsx)("div",{style:Ke.stopwatch,children:t})}}),Object(a.jsx)(v.a,{to:"/main",children:Object(a.jsx)("button",{type:"button",className:"btn",style:l?Object(Z.a)(Object(Z.a)({},Ke.doneButton),Ke.afterMargin):Object(Z.a)(Object(Z.a)({},Ke.doneButton),Ke.beforeMargin),onClick:function(){d(!0),o((new Date).getTime()-u)},children:"Done!"})})]})}),l&&Object(a.jsx)(Je,{handleSubmit:d,timestamp:u,timeSpent:s})]})},Qe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={user:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.onAuthStateChanged((function(t){t&&e.setState({user:t})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(j.a,{children:Object(a.jsx)(h.a,{fluid:!0,children:Object(a.jsxs)(m.a,{className:"justify-content-sm-center",children:[this.state.user&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/wowo-cs473/post/create",exact:!0,component:Se}),Object(a.jsx)(b.a,{path:"/wowo-cs473/post/detail",exact:!0,component:Ge}),Object(a.jsx)(b.a,{path:"/wowo-cs473/main/workout",exact:!0,component:Xe}),Object(a.jsx)(b.a,{path:"/wowo-cs473/",render:function(){return Object(a.jsx)(me,{user:e.state.user,index:"0"})}})]})}),!this.state.user&&Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/wowo-cs473/login",exact:!0,component:Oe}),Object(a.jsx)(b.a,{path:"/wowo-cs473/register",exact:!0,component:we}),Object(a.jsx)(b.a,{path:"/wowo-cs473/",exact:!0,component:Oe})]})]})})})}}]),n}(s.a.Component);i.a.render(Object(a.jsx)(j.a,{children:Object(a.jsx)(Qe,{})}),document.getElementById("root"))}},[[333,1,2]]]);
//# sourceMappingURL=main.4c35e6b9.chunk.js.map