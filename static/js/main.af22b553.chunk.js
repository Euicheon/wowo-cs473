(this["webpackJsonpwowo-cs473"]=this["webpackJsonpwowo-cs473"]||[]).push([[0],{112:function(e,t,n){},113:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(1),s=n.n(c),i=n(28),o=n.n(i),r=(n(165),n(166),n(20)),l=n(21),d=n(23),u=n(22),j=n(12),b=n(18),h=n(370),m=n(371),p=n(62);p.a.initializeApp({apiKey:"AIzaSyABT6_9hUpFXDFyIcPP-0BughuUygsVNyw",authDomain:"wowo-cs473.firebaseapp.com",databaseURL:"https://wowo-cs473.firebaseio.com",projectId:"wowo-cs473",storageBucket:"wowo-cs473.appspot.com",messagingSenderId:"27132694397",appId:"1:27132694397:web:b0a40d962ba53488ff8614",measurementId:"G-S0YXCKXKYH"});new p.a.auth.GoogleAuthProvider;var x=p.a.auth(),g=p.a,O=(n(171),n(10)),f=n(357),v=n(372),w=n(373),y={exerciseButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",borderColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",color:"#41ABFF",display:"inline-block"}},S=function(){return Object(a.jsx)(j.c,{to:"main/workout",children:Object(a.jsx)("button",{type:"button",className:"btn",style:y.exerciseButton,children:"Exercise!"})})},C=n.p+"static/media/BlueCalendar.03754e7c.png",N={align:{textAlign:"center",height:"600px",width:"100%",display:"flex",flexDirection:"column"},calendar:{margin:"10px 0 50px 0"}},k=function(){return Object(a.jsxs)("div",{style:N.align,children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:C,alt:"calendar",style:N.calendar})}),Object(a.jsx)(S,{})]})},F=n(50),D=n.n(F),E=n(27),A=n(76),B=function(e){var t=e.crewdata,n=Object(c.useState)(null),s=Object(O.a)(n,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){setTimeout((function(){t.sort((function(e,t){return e.points<t.points})),o(t)}),300)}),[o,t]),Object(a.jsx)("div",{className:"leaderboard",style:{textAlign:"center"},children:i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{children:i.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{children:[e.username," : ",e.points]})},e.username)}))}),Object(a.jsx)("button",{onClick:function(){return e.onSubmit(!1)},children:"Close"})]})})},I=(n(177),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},a.state={chats:[]},a.messagesEnd=s.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.database().ref(this.props.chatRefType).on("value",(function(t){var n=t.val(),a=[];for(var c in n)""!==n[c].message&&a.push({id:c,message:n[c].message,user:n[c].user,date:n[c].timestamp,isMe:n[c].user===e.props.currentUserName});var s=a;e.setState({chats:s})})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"chatbox",style:{height:"450px",overflow:"auto"},children:[Object(a.jsx)("ul",{className:"chat-list",children:this.state.chats.map((function(e){new Date(e.date);return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{className:e.isMe?"mymsg":"othermsg",children:[!e.isMe&&Object(a.jsx)("strong",{children:e.user+": "}),e.message]})},e.id)}))}),Object(a.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})}}]),n}(s.a.Component)),P=(n(178),g.firestore()),U={background:{position:"fixed",zIndex:"1",width:"433px",height:"600px",backgroundColor:"rgba(0, 0, 0, 0.25)"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"}},T=function(e){var t=Object(c.useState)(""),n=Object(O.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(e.crew),r=Object(O.a)(o,2),l=r[0],d=r[1],u=Object(c.useState)([]),b=Object(O.a)(u,2),h=b[0],m=b[1],p=Object(c.useState)(""),x=Object(O.a)(p,2),f=x[0],v=x[1],w=Object(c.useState)(!1),y=Object(O.a)(w,2),S=y[0],C=y[1],N=Object(c.useState)([]),k=Object(O.a)(N,2),F=k[0],T=k[1],L=function(e){var t=e.item;return Object(a.jsxs)("article",{className:"mini-card",onClick:function(){return t.availability?_(t.crewID):void alert("Selected crew is full now!")},children:[Object(a.jsx)("div",{children:t.crewID}),Object(a.jsxs)("div",{children:[t.members.length," / ",t.member_limit," "]})]})},M=function(e){var t=e.list;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)(L,{item:e},e.crewID)}))})},R=function(e){var t=P.collection("users"),n=[];P.collection("crews").doc(e).get().then((function(e){e.data().members.forEach((function(e){t.doc(e).get().then((function(e){return n.push({username:e.data().username,points:e.data().points})}))})),T(n),C(!S)}))},z=function(e){return Object(a.jsx)("div",{style:U.background,children:Object(a.jsx)("div",{style:U.popup,children:Object(a.jsx)(B,{onSubmit:e.closePopup,crewdata:e.crewdata})})})},_=function(e){var t=g.auth().currentUser;P.collection("users").doc(t.uid).update({crew:e}).then((function(){console.log("Document updated")})).catch((function(e){console.error("Error adding document: ",e)})),P.collection("crews").doc(e).update({members:g.firestore.FieldValue.arrayUnion(t.uid)}),d(e),v(e)};return Object(c.useEffect)((function(){return function(){var e=Object(A.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P.collection("crews").get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=!0;e.data().member_limit<e.data().members.length+1&&(t=!1),m((function(n){return[].concat(Object(E.a)(n),[{crewID:e.data().crewid,member_limit:e.data().member_limit,members:e.data().members,availability:t}])}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),e.crew&&(v(e.crew),d(e.crew)),function(){}}),[]),!e.crew&&!l||f||v(e.crew),Object(a.jsxs)("div",{className:"home--container",children:[S&&Object(a.jsx)(z,{closePopup:C,crewdata:F}),e.user&&(l||e.crew)&&Object(a.jsxs)("div",{className:"allow-chat",children:[Object(a.jsx)("button",{onClick:function(){R(l)},children:"Go to Leaderboard"}),Object(a.jsx)(I,{chatRefType:f,currentUserName:e.user.displayName}),Object(a.jsx)("form",{className:"send-chat",onSubmit:function(t){if(t.preventDefault(),""!==s){var n=g.database().ref(f),a={message:s,user:e.user.displayName,timestamp:(new Date).getTime()};n.push(a),i("")}},children:Object(a.jsx)("input",{type:"text",name:"message",id:"message",value:s,onChange:function(e){i(e.target.value)},placeholder:"Leave a message..."})})]}),e.user&&!(l||e.crew)&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsx)(M,{list:h})}),!e.user&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsxs)("p",{children:[Object(a.jsx)(j.b,{to:"/login",children:"Login"})," or ",Object(a.jsx)(j.b,{to:"/register",children:"Register"})," to start chatting!"]})})]})},L=n(134),M=n(135),R=n.n(M),z=(n(179),n(136));function _(){var e=Object(z.a)(["\ntext-align: center;\n.lds-ellipsis {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-ellipsis div {\n  position: absolute;\n  top: 33px;\n  width: 13px;\n  height: 13px;\n  border-radius: 50%;\n  background: #222;\n  animation-timing-function: cubic-bezier(0, 1, 1, 0);\n}\n.lds-ellipsis div:nth-child(1) {\n  left: 8px;\n  animation: lds-ellipsis1 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(2) {\n  left: 8px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(3) {\n  left: 32px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(4) {\n  left: 56px;\n  animation: lds-ellipsis3 0.6s infinite;\n}\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(24px, 0);\n  }\n}\n"]);return _=function(){return e},e}var G=n(137).a.div(_()),W=function(){return Object(a.jsx)(G,{children:Object(a.jsxs)("div",{className:"lds-ellipsis",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})},Y=(n(180),function(e){var t=Object(c.useState)("Default Title"),n=Object(O.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),r=Object(O.a)(o,2),l=r[0],d=r[1];return Object(c.useEffect)((function(){var t;void 0!==(t=e.info.data).title&&i(t.title),function(e){void 0!==e.imgPath&&d(e.imgPath)}(e.info.data)}),[]),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-md-12 px-0",children:Object(a.jsxs)("div",{className:"rounded-lg overflow-hidden",children:[Object(a.jsx)(j.c,{to:{pathname:"/post/detail",state:e.info},children:Object(a.jsx)("img",{src:l,alt:e.info.id,className:"img-fluid"})}),Object(a.jsxs)("div",{className:"postDescription",children:[s,Object(a.jsxs)("span",{className:"postlikes",children:["\u2665",e.info.data.whoLikes.length]})]})]})})})}),V=n(356),H=function(){var e=Object(c.useState)([]),t=Object(O.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)([]),o=Object(O.a)(i,2),r=o[0],l=o[1],d=Object(c.useState)(!0),u=Object(O.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(0),p=Object(O.a)(m,2),x=p[0],f=p[1];Object(c.useEffect)((function(){v()}),[]);var v=function(){g.firestore().collection("posts").get().then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),t.sort((function(e,t){return e.data.timestamp>t.data.timestamp?-1:e.data.timestamp<t.data.timestamp?1:0})),console.log("ALL : ",t),l(t);var n,a=10*x;t.length>=a+10?(n=t.slice(a,a+10),s((function(e){return[].concat(Object(E.a)(e),Object(E.a)(n))})),f((function(e){return e+1})),console.log("loadPosts_IF : ",n)):(n=t.slice(a),s((function(e){return[].concat(Object(E.a)(e),Object(E.a)(n))})),h(!1),console.log("loadPosts_ELSE : ",n))}))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"container-SearchCreate",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(j.c,{to:"/post/create",children:[" ",Object(a.jsx)(V.a,{className:"createButton",children:"Create"})," "]})}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{placeholder:"Search",className:"searchBar",onChange:function(e){var t=r.filter((function(t){return t.data.title.toLowerCase().includes(e.target.value.toLowerCase())}));s(t),h(!1)}})})]}),Object(a.jsx)("div",{id:"scrollableDiv",className:"scroll-container",children:Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)(L.a,{scrollableTarget:"scrollableDiv",dataLength:n.length,next:v,hasMore:b,loader:Object(a.jsx)(W,{}),children:Object(a.jsx)(R.a,{breakpointCols:{default:2},className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return Object(a.jsx)(Y,{info:e},e.id)}))})})})})]})},J=(n(181),n.p+"static/media/demo_calendar.10b69a79.jpeg"),K={align:{textAlign:"center",height:"520px",width:"90%"}},X=function(e){var t=e.color;return Object(a.jsx)("hr",{style:{color:t,backgroundColor:t,height:1}})},Q=function(){return Object(a.jsx)("div",{className:"calendar_img",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("h2",{id:"ubuntuFont",className:"titleCalendar",children:"Calendar"}),Object(a.jsx)(X,{color:"gray"}),Object(a.jsx)("img",{src:J,style:K.align,alt:""})]})})},q=n(26),Z=n(37),$=(n(112),c.Component,n(223),c.Component,n.p+"static/media/demoProfile.bb598ad7.png"),ee=g.firestore(),te={align:{backgroundColor:"white",textAlign:"center",height:"600px",width:"100%",display:"flex",flexDirection:"column"},profileImg:{width:"150px",height:"150px",resizeMode:"contain",margin:"10px 0 0 0"}},ne=function(e){var t=e.color;return Object(a.jsx)("hr",{style:{color:t,backgroundColor:t,height:1}})},ae=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).userList=null,e.state={username:"AmonGus",email:"amongus@gmail.com",gender:"Female",birth:"991225",crew:"Imposters",points:"100",profileImgPath:""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=g.auth().currentUser,n=ee.collection("users").doc(t.uid);console.log("users",n.data),ee.collection("users").doc(t.uid).get().then((function(t){console.log("find it!: ",t.data()),console.log("Name1",t.data().username),e.setState(Object(q.a)(Object(q.a)({},e.state),{},{username:t.data().username,email:t.data().email,crew:t.data().crew,points:t.data().points}))})).catch((function(e){console.error("Error getting document: ",e)}))}},{key:"render",value:function(){return Object(a.jsxs)("div",{style:{height:"600px",width:"433px",textAlign:"center"},children:[Object(a.jsx)("h2",{id:"ubuntuFont",className:"titleProfile",children:"Profile"}),Object(a.jsx)(ne,{color:"gray"}),Object(a.jsxs)("div",{className:"profile-box",children:[Object(a.jsx)("img",{src:$,alt:"",style:te.profileImg}),Object(a.jsx)("h2",{id:"ubuntuSmallBold",className:"name",children:this.state.username}),Object(a.jsx)("h2",{id:"ubuntuSmallBlack",children:this.state.email}),Object(a.jsxs)("h2",{id:"ubuntuSmallPink",children:["Crew: ",this.state.crew," | Points: ",this.state.points]})]}),Object(a.jsx)(ne,{color:"gray"})]})}}]),n}(s.a.Component),ce=n(358),se=n(360),ie=n(361),oe=n(362),re=n(363),le=n(364),de=n(365),ue=(n(224),n.p+"static/media/wowo_logo.207fea00.png"),je=g.firestore(),be={fixSize:{height:"600px"},navigation:{backgroundColor:"#EEEEEE"}},he=function(e){var t,n=Object(c.useState)(null),s=Object(O.a)(n,2),i=s[0],o=s[1],r=Object(c.useState)(e.index||"0"),l=Object(O.a)(r,2),d=l[0],u=l[1];return e.user&&(t=e.user.uid,je.collection("users").doc(t).get().then((function(e){null!=e.data().crew?o(e.data().crew):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)})),console.log(e.user.uid),console.log(e.user)),Object(a.jsx)(a.Fragment,{children:e.user&&Object(a.jsxs)(f.a,{lg:3.5,md:5.5,sm:7.5,children:[Object(a.jsxs)(v.a,{bg:"light",expand:"sm",align:"center",className:"navbar-custom",children:[Object(a.jsx)(j.b,{className:"navbar-brand",to:"/main",children:Object(a.jsx)("div",{className:"logo-image",children:Object(a.jsx)("img",{src:ue,className:"img-fluid"})})}),Object(a.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(v.a.Collapse,{id:"basic-navbar-nav",style:{flexDirection:"row"},children:Object(a.jsx)(w.a,{className:"ml-auto",children:Object(a.jsx)(j.b,{to:"/login",onClick:function(){g.auth().signOut()},children:"Logout"})})})]}),Object(a.jsx)(b.a,{path:"/main",component:k}),Object(a.jsx)(b.a,{path:"/crew",component:function(){return Object(a.jsx)(T,{user:e.user,crew:i})}}),Object(a.jsx)(b.a,{path:"/hunsu",component:H}),Object(a.jsx)(b.a,{path:"/calendar",component:Q}),Object(a.jsx)(b.a,{path:"/info",component:function(){return Object(a.jsx)(ae,{user:e.user})}}),Object(a.jsxs)(ce.a,{style:be.navigation,value:d,onChange:function(e,t){u(t)},showLabels:!0,children:[Object(a.jsx)(se.a,{component:j.b,to:"/main",label:"Main",value:"0",icon:Object(a.jsx)(ie.a,{})}),Object(a.jsx)(se.a,{component:j.b,to:"/crew",label:"Crew",value:"1",icon:Object(a.jsx)(oe.a,{})}),Object(a.jsx)(se.a,{component:j.b,to:"/hunsu",label:"Hunsu",value:"2",icon:Object(a.jsx)(re.a,{})}),Object(a.jsx)(se.a,{component:j.b,to:"/calendar",label:"Calendar",value:"3",icon:Object(a.jsx)(le.a,{})}),Object(a.jsx)(se.a,{component:j.b,to:"/info",label:"Profile",value:"4",icon:Object(a.jsx)(de.a,{})})]})]})})},me=n(48),pe=(n(113),{fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}}),xe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(me.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.password;g.auth().signInWithEmailAndPassword(n,c).then((function(e){a.props.history.push("/")})).catch((function(e){a.setState({error:e})}))},a.state={email:"",password:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,c=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:pe.fixSize,children:[Object(a.jsx)("h2",{style:pe.margin,children:"Login your account"}),c&&Object(a.jsx)("p",{className:"error-message",children:c.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Enter password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",value:n,style:pe.margin,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:pe.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)(j.b,{className:"register-btn",to:"/register",children:"Register here"})]})]})]})}}]),n}(s.a.Component),ge=g.firestore(),Oe={fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}},fe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(me.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.username,s=t.password,i=t.gender,o=t.birth;g.auth().createUserWithEmailAndPassword(n,s).then((function(){var e=g.auth().currentUser;e.updateProfile({displayName:c}).then((function(){ge.collection("users").doc(e.uid).set({username:c,email:n,gender:i,birth:o,profileImgPath:"/ProfileImg/demoProfile.png",crew:null,points:0,createdAt:new Date}).then((function(){console.log("Document written")})).catch((function(e){console.error("Error adding document: ",e)})),a.props.history.push("/")})).catch((function(e){a.setState({error:e})}))})).catch((function(e){a.setState({error:e})}))},a.state={username:"",email:"",password:"",gender:"",birth:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.username,c=e.password,s=e.gender,i=e.birth,o=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:Oe.fixSize,children:[Object(a.jsx)("h2",{style:Oe.margin,children:"Register your account"}),o&&Object(a.jsx)("p",{className:"error-message",children:o.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",value:n,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Choose a password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",style:Oe.margin,value:c,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(a.jsxs)("select",{value:s,onChange:this.handleChange,children:[Object(a.jsx)("option",{value:"Female",children:"Female"}),Object(a.jsx)("option",{value:"Male",children:"Male"})]}),Object(a.jsx)("label",{htmlFor:"birth",children:"Birth (YYMMDD)"}),Object(a.jsx)("input",{type:"text",name:"birth",id:"birth",value:i,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:Oe.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)(j.b,{className:"login-btn",to:"/login",children:"Login here"})]})]})]})}}]),n}(s.a.Component),ve=n(82),we=n.n(ve),ye=(n(329),n(330),function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(""),o=Object(O.a)(i,2),r=o[0],l=o[1],d=Object(c.useState)(""),u=Object(O.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(""),p=Object(O.a)(m,2),x=p[0],f=p[1],v=Object(c.useState)(""),w=Object(O.a)(v,2),y=w[0],S=w[1],C=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),N=Object(O.a)(C,2),k=N[0],F=N[1],E=g.database(),B=g.firestore(),I=g.auth().currentUser;B.collection("users").doc(I.uid).get().then((function(e){console.log("user : ",e.data().username),S(e.data().username)}));var P=g.firestore.FieldValue.increment(2),U=function(){var e=Object(A.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n,void 0!==(t=r)&&""!==t){e.next=5;break}return alert("Write the title"),e.abrupt("return");case 5:B.collection("users").doc(I.uid).get().then((function(e){B.collection("users").doc(I.uid).update({points:P}),E.ref().child(e.data().crew).push({message:y+" wrote a new post / Title : "+r,user:"[SYSTEM]",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),g.firestore().collection("posts").add({writer:y,title:t,content:a,imgPath:k,timestamp:new Date,whoLikes:[],comments:[]}).then((function(e){console.log("New Post Created : ",e.id),alert("You got 2 points!"),window.location.href="/hunsu"})).catch((function(e){console.log("New Posting Failed : ",e),alert("Posting Failed")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=null;return T=""!==b?Object(a.jsx)("img",{className:"profile_preview",src:x,alt:r}):Object(a.jsxs)("div",{className:"empty",children:[" ",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{})," Click to upload image"]}),Object(a.jsxs)("div",{className:"create",children:[Object(a.jsx)("h4",{children:"Create New Posts!"}),Object(a.jsx)("h5",{className:"description",children:"Title"}),Object(a.jsx)("input",{type:"text",className:"title",onChange:function(e){l(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h5",{className:"description",children:"Image"}),Object(a.jsx)("label",{htmlFor:"input",className:"img-holder",children:T}),Object(a.jsx)("input",{id:"input",type:"file",accept:"image/jpg, image/png, image/jpeg, image/gif",name:"image-upload",onChange:function(e){e.preventDefault();var t=new FileReader,n=b,a=e.target.files[0];t.onloadend=function(){h(a),f(t.result),g.storage().ref("postImages").child(a.name).put(a).then((function(e){e.ref.getDownloadURL().then((function(e){F(e)}))}))},void 0!==a?t.readAsDataURL(a):(h(n),alert("Canceled changing image"),console.log(b))}}),Object(a.jsx)("h5",{className:"description",children:"Content"}),Object(a.jsx)(we.a,{theme:"bubble",className:"editor",value:n,onChange:s})]}),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsx)(V.a,{onClick:U,className:"button",children:" Save "}),Object(a.jsxs)(j.c,{to:"/hunsu",children:[" ",Object(a.jsx)(V.a,{className:"button",children:" Quit "})," "]})]})]})}),Se=(n(331),n(376)),Ce=n(366),Ne=n(369),ke=n(367),Fe=n(374),De=n(368),Ee=n(88),Ae=n(147),Be=n.n(Ae),Ie=n(148),Pe=n.n(Ie),Ue=n(375),Te=n(149),Le=n.n(Te),Me=n(11),Re=n(146),ze=n.n(Re),_e=function(e){var t=Object(c.useState)(""),n=Object(O.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(""),r=Object(O.a)(o,2),l=r[0],d=r[1],u=Object(c.useState)(""),j=Object(O.a)(u,2),b=j[0],h=j[1],m=Object(c.useState)(""),p=Object(O.a)(m,2),x=p[0],f=p[1],v=Object(c.useState)(""),w=Object(O.a)(v,2),y=w[0],S=w[1],C=Object(c.useState)((new Date).toString()),N=Object(O.a)(C,2),k=N[0],F=N[1],D=Object(c.useState)(""),A=Object(O.a)(D,2),B=A[0],I=A[1],P=Object(c.useState)(""),U=Object(O.a)(P,2),T=U[0],L=U[1],M=Object(c.useState)(!1),R=Object(O.a)(M,2),z=R[0],_=R[1],G=Object(c.useState)([]),W=Object(O.a)(G,2),Y=W[0],V=W[1],H=Object(c.useState)([]),J=Object(O.a)(H,2),K=J[0],X=J[1],Q=g.firestore().collection("posts");Object(c.useEffect)((function(){g.firestore().collection("users").doc(g.auth().currentUser.uid).get().then((function(e){console.log("user : ",e.data().username),I(e.data().username),L(e.data().crew)})),Q.doc(e.location.state.id).get().then((function(e){i(e.id),d(e.data().writer[0].toUpperCase()),h(e.data().title),f(e.data().content),S(e.data().imgPath),F(e.data().timestamp.toDate().toString().slice(0,15)),X(e.data().whoLikes);for(var t=e.data().comments,n=function(){var e=t[a],n={authorUrl:e.authorUrl,avatarUrl:e.avatarUrl,createdAt:e.createdAt.toDate(),fullName:e.fullName,text:e.text};V((function(e){return[].concat(Object(E.a)(e),[n])}))},a=0;a<t.length;a++)n()}))}),[]);var Z={btn:function(e){return Object(q.a)(Object(q.a)({},e),{},{background:"#123456"})},comment:function(e){return Object(q.a)({},e)},textarea:function(e){return Object(q.a)({},e)}};return Object(a.jsxs)("div",{style:{height:"600px",width:"350px",borderColot:"black"},children:[Object(a.jsxs)(Se.a,{className:"root",children:[Object(a.jsx)(Ce.a,{avatar:Object(a.jsxs)(Fe.a,{className:"avatar",children:[" ",l," "]}),title:Object(a.jsx)("span",{className:"title",children:b}),subheader:Object(a.jsx)("span",{className:"createdAt",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"postdetailcrewname",children:T}),Object(a.jsx)("div",{className:"postdetailtimestamp",children:k})]})})}),Object(a.jsx)("img",{src:y,alt:s,className:"img-fluid"}),Object(a.jsxs)(ke.a,{disableSpacing:!0,children:[K.includes(B)?Object(a.jsx)(De.a,{"aria-label":"remove from favorites",onClick:function(){var t=K.filter((function(e){return e!==B}));console.log("Removed ARRAY: ",t),X(t),Q.doc(e.location.state.id).update({whoLikes:t})},children:Object(a.jsx)(Be.a,{})}):Object(a.jsx)(De.a,{"aria-label":"add to favorites",onClick:function(){console.log("push like : ",B),Q.doc(e.location.state.id).update({whoLikes:[].concat(Object(E.a)(K),[B])}),X((function(e){return[].concat(Object(E.a)(e),[B])}))},children:Object(a.jsx)(Pe.a,{})}),K.length,Object(a.jsx)(De.a,{className:Object(Me.a)("expand",{expandOpen:z}),onClick:function(){_(!z)},"aria-expanded":z,"aria-label":"show more",children:Object(a.jsx)(Le.a,{})})]}),Object(a.jsx)(Ue.a,{in:z,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(Ne.a,{children:Object(a.jsx)(Ee.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(a.jsx)(we.a,{theme:"bubble",className:"editor",value:x,readOnly:!0})})})})]}),Object(a.jsx)("div",{className:"commentBlock",style:{height:"300px",width:"100%",overflow:"auto"},children:Object(a.jsx)("div",{className:"realcomments",children:Object(a.jsx)(ze.a,{comments:Y,signinUrl:"/login",isLoggedIn:!0,styles:Z,onSubmit:function(t){t.length>0?(!function(t){var n={authorUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",avatarUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",createdAt:new Date,fullName:B+" - "+T,text:t};V([].concat(Object(E.a)(Y),[n])),Q.doc(e.location.state.id).update({comments:[].concat(Object(E.a)(Y),[n])})}(t),console.log("submit:",t)):alert("No comments written")}})})})]})},Ge=n(152),We=n(150),Ye={background:{position:"fixed",zIndex:"1",width:"400px",height:"700px",backgroundColor:"rgba(0, 0, 0, 0.25)",textAlign:"center"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"},upload:{border:"1px solid lightGrey",padding:"10px 10px 10px 10px",marginTop:"10px",marginBottom:"10px",backgroundColor:"#EEEEEE"},btnShare:{width:"100%",marginTop:"10px",marginBottom:"5px",background:"#41ABFF",borderColor:"none",color:"white"},btnCancel:{width:"100%",background:"white",borderColor:"#41ABFF",color:"#41ABFF"}},Ve=g.firestore(),He=g.database(),Je=function(e){var t=g.auth().currentUser,n=parseInt(e.timeSpent/1e3/60/60),c=parseInt(e.timeSpent/1e3/60),s=parseInt(e.timeSpent/1e3),i=t.displayName+" worked out for "+function(e,t,n){var a=n+" sec.";return 0===e&&0===t?a:0===e?t+" min "+a:e+" hour "+t+" min "+a}(n,c,s);return Object(a.jsx)("div",{style:Ye.background,children:Object(a.jsxs)("div",{style:Ye.popup,children:[Object(a.jsx)("h2",{children:"Great Job!"}),Object(a.jsx)("div",{children:"Would you share this exercise record with your Crew?"}),Object(a.jsx)("div",{style:Ye.upload,children:i}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.c,{to:"/crew",children:Object(a.jsx)(V.a,{style:Ye.btnShare,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e),Ve.collection("users").doc(t.uid).update({workoutHistory:g.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){Ve.collection("users").doc(t.uid).get().then((function(e){console.log("find it!: ",e.data()),He.ref().child(e.data().crew).push({message:i,user:"[SYSTEM]",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Share"})}),Object(a.jsx)(j.c,{to:"/main",children:Object(a.jsx)(V.a,{style:Ye.btnCancel,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e);var t=g.auth().currentUser;Ve.collection("users").doc(t.uid).update({workoutHistory:g.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Cancel"})})]})]})})},Ke={stopwatch:{fontStyle:"italic",fontSize:"50px",fontWeight:"bold",marginTop:"200px"},beforeMargin:{marginTop:"20vh"},afterMargin:{marginTop:"50vh"},doneButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",backgroundColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",fontStyle:"italic",color:"#FFFFFF"},fixSize:{height:"600px",width:"100%",textAlign:"center"}},Xe=function(e){var t=Object(c.useState)(0),n=Object(O.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(!1),r=Object(O.a)(o,2),l=r[0],d=r[1],u=(new Date).getTime();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{lg:4,md:6,sm:8,children:Object(a.jsxs)("div",{style:Ke.fixSize,children:[!l&&Object(a.jsx)(We.a,{seconds:0,minutes:0,hours:0,render:function(e){var t=e.formatted;return Object(a.jsx)("div",{style:Ke.stopwatch,children:t})}}),Object(a.jsx)(Ge.a,{to:"/main",children:Object(a.jsx)("button",{type:"button",className:"btn",style:l?Object(q.a)(Object(q.a)({},Ke.doneButton),Ke.afterMargin):Object(q.a)(Object(q.a)({},Ke.doneButton),Ke.beforeMargin),onClick:function(){d(!0),i((new Date).getTime()-u)},children:"Done!"})})]})}),l&&Object(a.jsx)(Je,{handleSubmit:d,timestamp:u,timeSpent:s})]})},Qe=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={user:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.onAuthStateChanged((function(t){t?e.setState({user:t}):(console.log("logout!!!!!!!!!"),e.setState({user:null})),console.log("logout!?")}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(j.a,{children:Object(a.jsx)(h.a,{fluid:!0,children:Object(a.jsxs)(m.a,{className:"justify-content-sm-center",children:[this.state.user&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/post/create",exact:!0,component:ye}),Object(a.jsx)(b.a,{path:"/post/detail",exact:!0,component:_e}),Object(a.jsx)(b.a,{path:"/main/workout",exact:!0,component:Xe}),Object(a.jsx)(b.a,{path:"/",render:function(){return Object(a.jsx)(he,{user:e.state.user,index:"0"})}})]})}),!this.state.user&&Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/login",exact:!0,component:xe}),Object(a.jsx)(b.a,{path:"/register",exact:!0,component:fe}),Object(a.jsx)(b.a,{path:"/",exact:!0,component:xe})]})]})})})}}]),n}(s.a.Component);o.a.render(Object(a.jsx)(Qe,{}),document.getElementById("root"))}},[[333,1,2]]]);
//# sourceMappingURL=main.af22b553.chunk.js.map