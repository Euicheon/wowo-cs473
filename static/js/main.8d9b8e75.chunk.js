(this["webpackJsonpwowo-cs473"]=this["webpackJsonpwowo-cs473"]||[]).push([[0],{100:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(1),i=n.n(c),o=n(25),s=n.n(o),r=(n(155),n(156),n(27)),l=n(28),d=n(30),u=n(29),j=n(11),b=n(18),h=n(318),m=n(319),p=n(41);p.a.initializeApp({apiKey:"AIzaSyABT6_9hUpFXDFyIcPP-0BughuUygsVNyw",authDomain:"wowo-cs473.firebaseapp.com",databaseURL:"https://wowo-cs473.firebaseio.com",projectId:"wowo-cs473",storageBucket:"wowo-cs473.appspot.com",messagingSenderId:"27132694397",appId:"1:27132694397:web:b0a40d962ba53488ff8614",measurementId:"G-S0YXCKXKYH"});new p.a.auth.GoogleAuthProvider;var x=p.a.auth(),g=p.a,f=(n(161),n(8)),O=n(307),v=n(320),w=n(321),y=n(36),S={exerciseButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",borderColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",color:"#41ABFF",display:"inline-block"}},C=function(){return Object(a.jsx)(j.c,{to:"main/workout",children:Object(a.jsx)("button",{type:"button",className:"btn",style:S.exerciseButton,children:"Exercise!"})})},k=n.p+"static/media/BlueCalendar.03754e7c.png",N={align:Object(y.a)({textAlign:"center",height:"600px",width:"433px",display:"flex",flexDirection:"column",justifyContent:"center"},"textAlign","center"),calendar:{margin:"10px 0 50px 0"}},F=function(){return Object(a.jsxs)("div",{style:N.align,children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:k,alt:"calendar",style:N.calendar})}),Object(a.jsx)(C,{})]})},D=n(48),E=n.n(D),A=n(22),B=n(70),I=function(e){var t=e.crewdata,n=Object(c.useState)(null),i=Object(f.a)(n,2),o=i[0],s=i[1];return Object(c.useEffect)((function(){setTimeout((function(){t.sort((function(e,t){return e.points<t.points})),s(t)}),300)}),[s,t]),Object(a.jsx)("div",{className:"leaderboard",style:{textAlign:"center"},children:o&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{children:o.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{children:[e.username," : ",e.points]})},e.username)}))}),Object(a.jsx)("button",{onClick:function(){return e.onSubmit(!1)},children:"Close"})]})})},T=(n(167),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},a.state={chats:[]},a.messagesEnd=i.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;g.database().ref(this.props.chatRefType).on("value",(function(t){var n=t.val(),a=[];for(var c in n)""!==n[c].message&&a.push({id:c,message:n[c].message,user:n[c].user,date:n[c].timestamp,isMe:n[c].user===e.props.currentUserName});var i=a;e.setState({chats:i})})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"chatbox",style:{height:"450px",overflow:"auto"},children:[Object(a.jsx)("ul",{className:"chat-list",children:this.state.chats.map((function(e){new Date(e.date);return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{className:e.isMe?"mymsg":"othermsg",children:[!e.isMe&&Object(a.jsx)("strong",{children:e.user+": "}),e.message]})},e.id)}))}),Object(a.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})}}]),n}(i.a.Component)),U=(n(168),g.firestore()),P={background:{position:"fixed",zIndex:"1",width:"433px",height:"600px",backgroundColor:"rgba(0, 0, 0, 0.25)"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"}},L=function(e){var t=Object(c.useState)(""),n=Object(f.a)(t,2),i=n[0],o=n[1],s=Object(c.useState)(e.crew),r=Object(f.a)(s,2),l=r[0],d=r[1],u=Object(c.useState)([]),b=Object(f.a)(u,2),h=b[0],m=b[1],p=Object(c.useState)(""),x=Object(f.a)(p,2),O=x[0],v=x[1],w=Object(c.useState)(!1),y=Object(f.a)(w,2),S=y[0],C=y[1],k=Object(c.useState)([]),N=Object(f.a)(k,2),F=N[0],D=N[1],L=function(e){var t=e.item;return Object(a.jsxs)("article",{className:"mini-card",onClick:function(){return t.availability?Y(t.crewID):void alert("Selected crew is full now!")},children:[Object(a.jsx)("div",{children:t.crewID}),Object(a.jsxs)("div",{children:[t.members.length," / ",t.member_limit," "]})]})},R=function(e){var t=e.list;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)(L,{item:e},e.crewID)}))})},M=function(e){var t=U.collection("users"),n=[];U.collection("crews").doc(e).get().then((function(e){e.data().members.forEach((function(e){t.doc(e).get().then((function(e){return n.push({username:e.data().username,points:e.data().points})}))})),D(n),C(!S)}))},z=function(e){return Object(a.jsx)("div",{style:P.background,children:Object(a.jsx)("div",{style:P.popup,children:Object(a.jsx)(I,{onSubmit:e.closePopup,crewdata:e.crewdata})})})},Y=function(e){var t=g.auth().currentUser;U.collection("users").doc(t.uid).update({crew:e}).then((function(){console.log("Document updated")})).catch((function(e){console.error("Error adding document: ",e)})),U.collection("crews").doc(e).update({members:g.firestore.FieldValue.arrayUnion(t.uid)}),d(e),v(e)};return Object(c.useEffect)((function(){return function(){var e=Object(B.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U.collection("crews").get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=!0;e.data().member_limit<e.data().members.length+1&&(t=!1),m((function(n){return[].concat(Object(A.a)(n),[{crewID:e.data().crewid,member_limit:e.data().member_limit,members:e.data().members,availability:t}])}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),e.crew&&(v(e.crew),d(e.crew)),function(){}}),[]),!e.crew&&!l||O||v(e.crew),Object(a.jsxs)("div",{className:"home--container",children:[S&&Object(a.jsx)(z,{closePopup:C,crewdata:F}),e.user&&(l||e.crew)&&Object(a.jsxs)("div",{className:"allow-chat",children:[Object(a.jsx)("button",{onClick:function(){M(l)},children:"Go to Leaderboard"}),Object(a.jsx)(T,{chatRefType:O,currentUserName:e.user.displayName}),Object(a.jsx)("form",{className:"send-chat",onSubmit:function(t){if(t.preventDefault(),""!==i){var n=g.database().ref(O),a={message:i,user:e.user.displayName,timestamp:(new Date).getTime()};n.push(a),o("")}},children:Object(a.jsx)("input",{type:"text",name:"message",id:"message",value:i,onChange:function(e){o(e.target.value)},placeholder:"Leave a message..."})})]}),e.user&&!(l||e.crew)&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsx)(R,{list:h})}),!e.user&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsxs)("p",{children:[Object(a.jsx)(j.b,{to:"/login",children:"Login"})," or ",Object(a.jsx)(j.b,{to:"/register",children:"Register"})," to start chatting!"]})})]})},R=n(121),M=n(122),z=n.n(M),Y=(n(169),n(123));function _(){var e=Object(Y.a)(["\ntext-align: center;\n.lds-ellipsis {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-ellipsis div {\n  position: absolute;\n  top: 33px;\n  width: 13px;\n  height: 13px;\n  border-radius: 50%;\n  background: #222;\n  animation-timing-function: cubic-bezier(0, 1, 1, 0);\n}\n.lds-ellipsis div:nth-child(1) {\n  left: 8px;\n  animation: lds-ellipsis1 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(2) {\n  left: 8px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(3) {\n  left: 32px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(4) {\n  left: 56px;\n  animation: lds-ellipsis3 0.6s infinite;\n}\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(24px, 0);\n  }\n}\n"]);return _=function(){return e},e}var W=n(124).a.div(_()),G=function(){return Object(a.jsx)(W,{children:Object(a.jsxs)("div",{className:"lds-ellipsis",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})},H=(n(170),function(e){var t=Object(c.useState)("Default Title"),n=Object(f.a)(t,2),i=n[0],o=n[1],s=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),r=Object(f.a)(s,2),l=r[0],d=r[1];return Object(c.useEffect)((function(){var t;void 0!==(t=e.info.data).title&&o(t.title),function(e){void 0!==e.imgPath&&d(e.imgPath)}(e.info.data)}),[]),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-md-12 px-0",children:Object(a.jsxs)("div",{className:"rounded-lg overflow-hidden",children:[Object(a.jsx)(j.c,{to:{pathname:"/post/detail",state:e.info},children:Object(a.jsx)("img",{src:l,alt:e.info.id,className:"img-fluid"})}),Object(a.jsxs)("div",{className:"postDescription",children:[i,Object(a.jsxs)("span",{className:"postlikes",children:["\u2665",e.info.data.whoLikes.length]})]})]})})})}),V=n(303),K=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)([]),s=Object(f.a)(o,2),r=s[0],l=s[1],d=Object(c.useState)(!0),u=Object(f.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(0),p=Object(f.a)(m,2),x=p[0],O=p[1];Object(c.useEffect)((function(){v()}),[]);var v=function(){g.firestore().collection("posts").get().then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),t.sort((function(e,t){return e.data.timestamp>t.data.timestamp?-1:e.data.timestamp<t.data.timestamp?1:0})),console.log("ALL : ",t),l(t);var n,a=10*x;t.length>=a+10?(n=t.slice(a,a+10),i((function(e){return[].concat(Object(A.a)(e),Object(A.a)(n))})),O((function(e){return e+1})),console.log("loadPosts_IF : ",n)):(n=t.slice(a),i((function(e){return[].concat(Object(A.a)(e),Object(A.a)(n))})),h(!1),console.log("loadPosts_ELSE : ",n))}))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"container-SearchCreate",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(j.c,{to:"/post/create",children:[" ",Object(a.jsx)(V.a,{className:"createButton",children:"Create"})," "]})}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{placeholder:"Search",className:"searchBar",onChange:function(e){var t=r.filter((function(t){return t.data.title.toLowerCase().includes(e.target.value.toLowerCase())}));i(t),h(!1)}})})]}),Object(a.jsx)("div",{id:"scrollableDiv",className:"scroll-container",children:Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)(R.a,{scrollableTarget:"scrollableDiv",dataLength:n.length,next:v,hasMore:b,loader:Object(a.jsx)(G,{}),children:Object(a.jsx)(z.a,{breakpointCols:{default:2},className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return Object(a.jsx)(H,{info:e},e.id)}))})})})})]})},J=(n(99),n(139)),X=(n(171),{recordTitle:{marginRight:"50%",marginTop:"10px",marginBottom:"10px"}}),Q=function(){var e=Object(c.useState)(new Date),t=Object(f.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)([]),s=Object(f.a)(o,2),r=s[0],l=s[1],d=Object(c.useState)([]),u=Object(f.a)(d,2),j=u[0],b=u[1],h=Object(c.useState)(!1),m=Object(f.a)(h,2),x=(m[0],m[1]),g=function(e,t,n){var a=n+" sec";return 0===e&&0===t?a:0===e?t+" min "+a:e+" hour "+t+" min "+a};Object(c.useEffect)((function(){var e=p.a.firestore(),t=p.a.auth().currentUser;0===r.length&&e.collection("users").doc(t.uid).get().then((function(e){var t=[],a=!1;l(e.data().workoutHistory),console.log(e.data().workoutHistory),e.data().workoutHistory.forEach((function(e){var c=e.timestamp,i=e.duration;new Date(c).toDateString()===n.toDateString()&&(a=!0,t.push(i))})),b(t),x(a)})).catch((function(e){console.error("Error getting document: ",e)}))}),[r]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J.a,{onChange:i,onClickDay:function(e,t){var n=[];x(!1),r.forEach((function(t){var a=t.timestamp,c=t.duration;new Date(a).toDateString()===e.toDateString()&&(x(!0),n.push(c))})),b(n)},value:n}),Object(a.jsx)("p",{style:X.recordTitle,children:"Your Workout Record"}),x&&j.map((function(e){var t=parseInt(e/1e3/60/60),n=parseInt(e/1e3/60),c=parseInt(e/1e3);return Object(a.jsxs)("div",{children:["- ",g(t,n-60*t,c-60*n)]},e)}))]})},q=(n.p,{align:{width:"433px",height:"600px",display:"flex",justifyContent:"center"},calendar:{marginTop:"5%"}}),Z=function(e){var t=e.color;return Object(a.jsx)("hr",{style:{color:t,backgroundColor:t,height:1}})},$=function(){return Object(a.jsx)("div",{style:q.align,children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("h2",{id:"ubuntuFont",className:"titleCalendar",children:"Calendar"}),Object(a.jsx)(Z,{color:"gray"}),Object(a.jsx)(Q,{})]})})},ee=n(21),te={background:{position:"fixed",zIndex:"1",width:"433px",height:"600px",backgroundColor:"rgba(0, 0, 0, 0.25)",textAlign:"center"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"},upload:{border:"1px solid lightGrey",padding:"10px 10px 10px 10px",marginTop:"10px",marginBottom:"10px",backgroundColor:"#EEEEEE",whiteSpace:"pre-wrap"},btnShare:{width:"100%",marginTop:"10px",marginBottom:"5px",background:"#41ABFF",borderColor:"none",color:"white"},btnCancel:{width:"100%",background:"white",borderColor:"#41ABFF",color:"#41ABFF"}},ne=function(e){return Object(a.jsx)("div",{style:te.background,children:Object(a.jsxs)("div",{style:te.popup,children:[Object(a.jsx)("h4",{children:"How can I get the points?"}),Object(a.jsxs)("div",{style:te.upload,children:["\ud83c\udfcb\ufe0f\u200d\u2642\ufe0f WORKOUT on the Main tab!",Object(a.jsx)("br",{}),"(1pt for each 10min)",Object(a.jsx)("br",{}),"\ud83d\udcdd POST on the Hunsu tab.",Object(a.jsx)("br",{}),"(2pt for each post)"]}),Object(a.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:Object(a.jsx)(V.a,{style:te.btnCancel,onClick:e.handleSubmit,children:"Back"})})]})})},ae=n(304),ce=n(306),ie=(n(172),n.p+"static/media/demoProfile.bb598ad7.png"),oe=g.firestore(),se={align:{backgroundColor:"white",textAlign:"center",height:"600px",width:"100%",display:"flex",flexDirection:"column"},profileImg:{width:"150px",height:"150px",resizeMode:"contain",margin:"10px 0 0 0"}},re=function(e){var t=e.color;return Object(a.jsx)("hr",{style:{color:t,backgroundColor:t,height:1}})},le=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).userList=null,a.state={info:!1,username:"AmonGus",email:"amongus@gmail.com",gender:"Female",birth:"991225",crew:"Imposters",points:"0",profileImgPath:""},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=g.auth().currentUser,n=oe.collection("users").doc(t.uid);console.log("users",n.data),oe.collection("users").doc(t.uid).get().then((function(t){console.log("find it!: ",t.data()),console.log("Name1",t.data().username),e.setState(Object(ee.a)(Object(ee.a)({},e.state),{},{username:t.data().username,email:t.data().email,crew:t.data().crew,points:t.data().points}))})).catch((function(e){console.error("Error getting document: ",e)}))}},{key:"onInfoClick",value:function(){this.setState({info:!this.state.info})}},{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[this.state.info&&Object(a.jsx)(ne,{handleSubmit:this.onInfoClick.bind(this)}),Object(a.jsxs)("div",{style:{height:"600px",width:"433px",textAlign:"center"},children:[Object(a.jsx)("h2",{id:"ubuntuFont",className:"titleProfile",children:"Profile"}),Object(a.jsx)(re,{color:"gray"}),Object(a.jsxs)("div",{className:"profile-box",children:[Object(a.jsx)("img",{src:ie,alt:"",style:se.profileImg}),Object(a.jsx)("h2",{id:"ubuntuSmallBold",className:"name",children:this.state.username}),Object(a.jsx)("h2",{id:"ubuntuSmallBlack",children:this.state.email}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(a.jsxs)("h2",{id:"ubuntuSmallPink",children:["Crew: ",this.state.crew," | Points: ",this.state.points]}),Object(a.jsx)(ae.a,{onClick:this.onInfoClick.bind(this),children:Object(a.jsx)(ce.a,{style:{marginLeft:"1%",marginBottom:"1%"}})})]})]}),Object(a.jsx)(re,{color:"gray"})]})]})}}]),n}(i.a.Component),de=n(308),ue=n(309),je=n(310),be=n(311),he=n(312),me=n(313),pe=n(314),xe=(n(173),n.p+"static/media/wowo_logo.207fea00.png"),ge=g.firestore(),fe={fixSize:{height:"600px"},navigation:{backgroundColor:"#EEEEEE"}},Oe=function(e){var t,n=Object(c.useState)(null),i=Object(f.a)(n,2),o=i[0],s=i[1],r=Object(c.useState)(e.index||"main"),l=Object(f.a)(r,2),d=l[0],u=l[1];return e.user&&(t=e.user.uid,ge.collection("users").doc(t).get().then((function(e){null!=e.data().crew?s(e.data().crew):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)})),console.log(e.user.uid),console.log(e.user)),Object(a.jsx)(a.Fragment,{children:e.user&&Object(a.jsxs)(O.a,{lg:3.5,md:5.5,sm:7.5,children:[Object(a.jsxs)(v.a,{bg:"light",expand:"sm",align:"center",className:"navbar-custom",children:[Object(a.jsx)(j.b,{className:"navbar-brand",to:"/main",children:Object(a.jsx)("div",{className:"logo-image",children:Object(a.jsx)("img",{src:xe,alt:"logo",className:"img-fluid"})})}),Object(a.jsx)(v.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(v.a.Collapse,{id:"basic-navbar-nav",style:{flexDirection:"row"},children:Object(a.jsx)(w.a,{className:"ml-auto",children:Object(a.jsx)(j.b,{to:"/login",onClick:function(){g.auth().signOut()},children:"Logout"})})})]}),Object(a.jsx)(b.a,{path:"/main",component:F}),Object(a.jsx)(b.a,{path:"/crew",component:function(){return Object(a.jsx)(L,{user:e.user,crew:o})}}),Object(a.jsx)(b.a,{path:"/hunsu",component:K}),Object(a.jsx)(b.a,{path:"/calendar",component:$}),Object(a.jsx)(b.a,{path:"/info",component:function(){return Object(a.jsx)(le,{user:e.user})}}),Object(a.jsxs)(de.a,{style:fe.navigation,value:d,onChange:function(e,t){u(t)},showLabels:!0,children:[Object(a.jsx)(ue.a,{component:j.b,to:"/main",label:"Main",value:"main",icon:Object(a.jsx)(je.a,{})}),Object(a.jsx)(ue.a,{component:j.b,to:"/crew",label:"Crew",value:"crew",icon:Object(a.jsx)(be.a,{})}),Object(a.jsx)(ue.a,{component:j.b,to:"/hunsu",label:"Hunsu",value:"hunsu",icon:Object(a.jsx)(he.a,{})}),Object(a.jsx)(ue.a,{component:j.b,to:"/calendar",label:"Calendar",value:"calendar",icon:Object(a.jsx)(me.a,{})}),Object(a.jsx)(ue.a,{component:j.b,to:"/info",label:"Profile",value:"profile",icon:Object(a.jsx)(pe.a,{})})]})]})})},ve=(n(100),{fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}}),we=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.password;g.auth().signInWithEmailAndPassword(n,c).then((function(e){a.props.history.push("/")})).catch((function(e){a.setState({error:e})}))},a.state={email:"",password:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,c=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:ve.fixSize,children:[Object(a.jsx)("h2",{style:ve.margin,children:"Login your account"}),c&&Object(a.jsx)("p",{className:"error-message",children:c.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Enter password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",value:n,style:ve.margin,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:ve.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)(j.b,{className:"register-btn",to:"/register",children:"Register here"})]})]})]})}}]),n}(i.a.Component),ye=g.firestore(),Se={fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}},Ce=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(y.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.username,i=t.password,o=t.gender,s=t.birth;g.auth().createUserWithEmailAndPassword(n,i).then((function(){var e=g.auth().currentUser;e.updateProfile({displayName:c}).then((function(){ye.collection("users").doc(e.uid).set({username:c,email:n,gender:o,birth:s,profileImgPath:"/ProfileImg/demoProfile.png",crew:null,points:0,createdAt:new Date}).then((function(){console.log("Document written")})).catch((function(e){console.error("Error adding document: ",e)})),a.props.history.push("/")})).catch((function(e){a.setState({error:e})}))})).catch((function(e){a.setState({error:e})}))},a.state={username:"",email:"",password:"",gender:"",birth:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.username,c=e.password,i=e.gender,o=e.birth,s=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:Se.fixSize,children:[Object(a.jsx)("h2",{style:Se.margin,children:"Register your account"}),s&&Object(a.jsx)("p",{className:"error-message",children:s.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",value:n,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Choose a password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",style:Se.margin,value:c,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(a.jsxs)("select",{value:i,onChange:this.handleChange,children:[Object(a.jsx)("option",{value:"Female",children:"Female"}),Object(a.jsx)("option",{value:"Male",children:"Male"})]}),Object(a.jsx)("label",{htmlFor:"birth",children:"Birth (YYMMDD)"}),Object(a.jsx)("input",{type:"text",name:"birth",id:"birth",value:o,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:Se.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)(j.b,{className:"login-btn",to:"/login",children:"Login here"})]})]})]})}}]),n}(i.a.Component),ke=n(76),Ne=n.n(ke),Fe=(n(278),n(279),function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),n=t[0],i=t[1],o=Object(c.useState)(""),s=Object(f.a)(o,2),r=s[0],l=s[1],d=Object(c.useState)(""),u=Object(f.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(""),p=Object(f.a)(m,2),x=p[0],O=p[1],v=Object(c.useState)(""),w=Object(f.a)(v,2),y=w[0],S=w[1],C=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),k=Object(f.a)(C,2),N=k[0],F=k[1],D=g.database(),A=g.firestore(),I=g.auth().currentUser;A.collection("users").doc(I.uid).get().then((function(e){console.log("user : ",e.data().username),S(e.data().username)}));var T=g.firestore.FieldValue.increment(2),U=function(){var e=Object(B.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n,void 0!==(t=r)&&""!==t){e.next=5;break}return alert("Write the title"),e.abrupt("return");case 5:A.collection("users").doc(I.uid).get().then((function(e){A.collection("users").doc(I.uid).update({points:T}),D.ref().child(e.data().crew).push({message:y+" wrote a new post / Title : "+r,user:"[SYSTEM]",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),g.firestore().collection("posts").add({writer:y,title:t,content:a,imgPath:N,timestamp:new Date,whoLikes:[],comments:[]}).then((function(e){console.log("New Post Created : ",e.id),alert("You got 2 points!")})).catch((function(e){console.log("New Posting Failed : ",e),alert("Posting Failed")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=null;return P=""!==b?Object(a.jsx)("img",{className:"profile_preview",src:x,alt:r}):Object(a.jsxs)("div",{className:"empty",children:[" ",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{})," Click to upload image"]}),Object(a.jsxs)("div",{className:"create",children:[Object(a.jsx)("h4",{children:"Create New Posts!"}),Object(a.jsx)("h5",{className:"description",children:"Title"}),Object(a.jsx)("input",{type:"text",className:"title",onChange:function(e){l(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h5",{className:"description",children:"Image"}),Object(a.jsx)("label",{htmlFor:"input",className:"img-holder",children:P}),Object(a.jsx)("input",{id:"input",type:"file",accept:"image/jpg, image/png, image/jpeg, image/gif",name:"image-upload",onChange:function(e){e.preventDefault();var t=new FileReader,n=b,a=e.target.files[0];t.onloadend=function(){h(a),O(t.result),g.storage().ref("postImages").child(a.name).put(a).then((function(e){e.ref.getDownloadURL().then((function(e){F(e)}))}))},void 0!==a?t.readAsDataURL(a):(h(n),alert("Canceled changing image"),console.log(b))}}),Object(a.jsx)("h5",{className:"description",children:"Content"}),Object(a.jsx)(Ne.a,{theme:"bubble",className:"editor",value:n,onChange:i})]}),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsxs)(j.c,{to:"/hunsu",children:[" ",Object(a.jsx)(V.a,{onClick:U,className:"button",children:" Save "})," "]}),Object(a.jsxs)(j.c,{to:"/hunsu",children:[" ",Object(a.jsx)(V.a,{className:"button",children:" Quit "})," "]})]})]})}),De=(n(280),n(324)),Ee=n(315),Ae=n(317),Be=n(316),Ie=n(322),Te=n(82),Ue=n(134),Pe=n.n(Ue),Le=n(135),Re=n.n(Le),Me=n(323),ze=n(136),Ye=n.n(ze),_e=n(10),We=n(133),Ge=n.n(We),He=function(e){var t=Object(c.useState)(""),n=Object(f.a)(t,2),i=n[0],o=n[1],s=Object(c.useState)(""),r=Object(f.a)(s,2),l=r[0],d=r[1],u=Object(c.useState)(""),j=Object(f.a)(u,2),b=j[0],h=j[1],m=Object(c.useState)(""),p=Object(f.a)(m,2),x=p[0],O=p[1],v=Object(c.useState)(""),w=Object(f.a)(v,2),y=w[0],S=w[1],C=Object(c.useState)((new Date).toString()),k=Object(f.a)(C,2),N=k[0],F=k[1],D=Object(c.useState)(""),E=Object(f.a)(D,2),B=E[0],I=E[1],T=Object(c.useState)(""),U=Object(f.a)(T,2),P=U[0],L=U[1],R=Object(c.useState)(!0),M=Object(f.a)(R,2),z=M[0],Y=M[1],_=Object(c.useState)([]),W=Object(f.a)(_,2),G=W[0],H=W[1],V=Object(c.useState)([]),K=Object(f.a)(V,2),J=K[0],X=K[1],Q=g.firestore().collection("posts"),q=g.firestore(),Z=g.firestore.FieldValue.increment(1),$=g.auth().currentUser;Object(c.useEffect)((function(){g.firestore().collection("users").doc(g.auth().currentUser.uid).get().then((function(e){console.log("user : ",e.data().username),I(e.data().username),L(e.data().crew)})),Q.doc(e.location.state.id).get().then((function(e){o(e.id),d(e.data().writer[0].toUpperCase()),h(e.data().title),O(e.data().content),S(e.data().imgPath),F(e.data().timestamp.toDate().toString().slice(0,15)),X(e.data().whoLikes);for(var t=e.data().comments,n=function(){var e=t[a],n={authorUrl:e.authorUrl,avatarUrl:e.avatarUrl,createdAt:e.createdAt.toDate(),fullName:e.fullName,text:e.text};H((function(e){return[].concat(Object(A.a)(e),[n])}))},a=0;a<t.length;a++)n()}))}),[]);var te={btn:function(e){return Object(ee.a)(Object(ee.a)({},e),{},{background:"#123456"})},comment:function(e){return Object(ee.a)({},e)},textarea:function(e){return Object(ee.a)({},e)}};return Object(a.jsxs)("div",{style:{height:"600px",width:"350px"},children:[Object(a.jsxs)(De.a,{className:"root",children:[Object(a.jsx)(Ee.a,{avatar:Object(a.jsxs)(Ie.a,{className:"avatar",children:[" ",l," "]}),title:Object(a.jsx)("span",{className:"title",children:b}),subheader:Object(a.jsx)("span",{className:"createdAt",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"postdetailcrewname",children:P}),Object(a.jsx)("div",{className:"postdetailtimestamp",children:N})]})})}),Object(a.jsx)("img",{src:y,alt:i,className:"img-fluid"}),Object(a.jsxs)(Be.a,{disableSpacing:!0,children:[J.includes(B)?Object(a.jsx)(ae.a,{"aria-label":"remove from favorites",onClick:function(){var t=J.filter((function(e){return e!==B}));console.log("Removed ARRAY: ",t),X(t),Q.doc(e.location.state.id).update({whoLikes:t})},children:Object(a.jsx)(Pe.a,{})}):Object(a.jsx)(ae.a,{"aria-label":"add to favorites",onClick:function(){console.log("push like : ",B),Q.doc(e.location.state.id).update({whoLikes:[].concat(Object(A.a)(J),[B])}),X((function(e){return[].concat(Object(A.a)(e),[B])}))},children:Object(a.jsx)(Re.a,{})}),J.length,Object(a.jsx)(ae.a,{className:Object(_e.a)("expand",{expandOpen:z}),onClick:function(){Y(!z)},"aria-expanded":z,"aria-label":"show more",children:Object(a.jsx)(Ye.a,{})})]}),Object(a.jsx)(Me.a,{in:z,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(Ae.a,{children:Object(a.jsx)(Te.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(a.jsx)(Ne.a,{theme:"bubble",className:"editor",value:x,readOnly:!0})})})})]}),Object(a.jsx)("div",{className:"commentBlock",style:{height:"300px",width:"100%",overflow:"auto"},children:Object(a.jsx)("div",{className:"realcomments",children:Object(a.jsx)(Ge.a,{comments:G,signinUrl:"/login",isLoggedIn:!0,styles:te,onSubmit:function(t){t.length>0?(!function(t){var n={authorUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",avatarUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",createdAt:new Date,fullName:B+" - "+P,text:t};H([].concat(Object(A.a)(G),[n])),Q.doc(e.location.state.id).update({comments:[].concat(Object(A.a)(G),[n])}),q.collection("users").doc($.uid).update({points:Z}),alert("You got 1 point!")}(t),console.log("submit:",t)):alert("No comments written")}})})})]})},Ve=n(140),Ke=n(137),Je={background:{position:"fixed",zIndex:"1",width:"400px",height:"700px",backgroundColor:"rgba(0, 0, 0, 0.25)",textAlign:"center"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"},upload:{border:"1px solid lightGrey",padding:"10px 10px 10px 10px",marginTop:"10px",marginBottom:"10px",backgroundColor:"#EEEEEE"},btnShare:{width:"100%",marginTop:"10px",marginBottom:"5px",background:"#41ABFF",borderColor:"none",color:"white"},btnCancel:{width:"100%",background:"white",borderColor:"#41ABFF",color:"#41ABFF"}},Xe=g.firestore(),Qe=g.database(),qe=g.firestore.FieldValue.increment(1),Ze=function(e){var t=g.auth().currentUser,n=parseInt(e.timeSpent/1e3/60/60),c=parseInt(e.timeSpent/1e3/60),i=parseInt(e.timeSpent/1e3),o=t.displayName+" worked out for "+function(e,t,n){var a=n+" sec.";return 0===e&&0===t?a:0===e?t+" min "+a:e+" hour "+t+" min "+a}(n,c-60*n,i-60*c);return Object(a.jsx)("div",{style:Je.background,children:Object(a.jsxs)("div",{style:Je.popup,children:[Object(a.jsx)("h2",{children:"Great Job!"}),Object(a.jsx)("div",{children:"Would you share this exercise record with your Crew?"}),Object(a.jsx)("div",{style:Je.upload,children:o}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.c,{to:"/crew",children:Object(a.jsx)(V.a,{style:Je.btnShare,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e),Xe.collection("users").doc(t.uid).update({workoutHistory:g.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){Xe.collection("users").doc(t.uid).get().then((function(e){console.log("find it!: ",e.data()),Qe.ref().child(e.data().crew).push({message:o,user:"[SYSTEM]",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)})),Xe.collection("users").doc(t.uid).update({points:qe}),alert("You got 1 point!")},children:"Share"})}),Object(a.jsx)(j.c,{to:"/main",children:Object(a.jsx)(V.a,{style:Je.btnCancel,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e);var t=g.auth().currentUser;Xe.collection("users").doc(t.uid).update({workoutHistory:g.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)})),Xe.collection("users").doc(t.uid).update({points:qe}),alert("You got 1 point!")},children:"Cancel"})})]})]})})},$e={stopwatch:{fontStyle:"italic",fontSize:"50px",fontWeight:"bold",marginTop:"200px"},beforeMargin:{marginTop:"20vh"},afterMargin:{marginTop:"50vh"},doneButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",backgroundColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",fontStyle:"italic",color:"#FFFFFF"},fixSize:{height:"600px",width:"100%",textAlign:"center"}},et=function(e){var t=Object(c.useState)(0),n=Object(f.a)(t,2),i=n[0],o=n[1],s=Object(c.useState)(!1),r=Object(f.a)(s,2),l=r[0],d=r[1],u=(new Date).getTime();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{lg:4,md:6,sm:8,children:Object(a.jsxs)("div",{style:$e.fixSize,children:[!l&&Object(a.jsx)(Ke.a,{seconds:0,minutes:0,hours:0,render:function(e){var t=e.formatted;return Object(a.jsx)("div",{style:$e.stopwatch,children:t})}}),Object(a.jsx)(Ve.a,{to:"/main",children:Object(a.jsx)("button",{type:"button",className:"btn",style:l?Object(ee.a)(Object(ee.a)({},$e.doneButton),$e.afterMargin):Object(ee.a)(Object(ee.a)({},$e.doneButton),$e.beforeMargin),onClick:function(){d(!0),o((new Date).getTime()-u)},children:"Done!"})})]})}),l&&Object(a.jsx)(Ze,{handleSubmit:d,timestamp:u,timeSpent:i})]})},tt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={user:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.onAuthStateChanged((function(t){t?e.setState({user:t}):(console.log("logout!!!!!!!!!"),e.setState({user:null})),console.log("logout!?")}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(j.a,{children:Object(a.jsx)(h.a,{fluid:!0,children:Object(a.jsxs)(m.a,{className:"justify-content-sm-center",children:[this.state.user&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/post/create",exact:!0,component:Fe}),Object(a.jsx)(b.a,{path:"/post/detail",exact:!0,component:He}),Object(a.jsx)(b.a,{path:"/main/workout",exact:!0,component:et}),Object(a.jsx)(b.a,{path:"/",render:function(){return Object(a.jsx)(Oe,{user:e.state.user,index:"main"})}})]})}),!this.state.user&&Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/login",exact:!0,component:we}),Object(a.jsx)(b.a,{path:"/register",exact:!0,component:Ce}),Object(a.jsx)(b.a,{path:"/",exact:!0,component:we})]})]})})})}}]),n}(i.a.Component);s.a.render(Object(a.jsx)(tt,{}),document.getElementById("root"))},99:function(e,t,n){}},[[282,1,2]]]);
//# sourceMappingURL=main.8d9b8e75.chunk.js.map