(this["webpackJsonpwowo-cs473"]=this["webpackJsonpwowo-cs473"]||[]).push([[0],{150:function(e,t,n){},151:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){},164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},276:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(1),s=n.n(c),i=n(23),o=n.n(i),r=(n(150),n(151),n(32)),l=n(33),d=n(36),u=n(35),j=n(11),b=n(18),h=n(313),m=n(314),p=n(58);p.a.initializeApp({apiKey:"AIzaSyABT6_9hUpFXDFyIcPP-0BughuUygsVNyw",authDomain:"wowo-cs473.firebaseapp.com",databaseURL:"https://wowo-cs473.firebaseio.com",projectId:"wowo-cs473",storageBucket:"wowo-cs473.appspot.com",messagingSenderId:"27132694397",appId:"1:27132694397:web:b0a40d962ba53488ff8614",measurementId:"G-S0YXCKXKYH"});new p.a.auth.GoogleAuthProvider;var x=p.a.auth(),O=p.a,f=(n(156),n(8)),g=n(300),w=n(315),v=n(316),y={exerciseButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",borderColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",color:"#41ABFF",display:"inline-block"}},S=function(){return Object(a.jsx)(j.c,{to:"main/workout",children:Object(a.jsx)("button",{type:"button",className:"btn",style:y.exerciseButton,children:"Exercise!"})})},N=n.p+"static/media/BlueCalendar.03754e7c.png",C={align:{textAlign:"center",height:"600px",width:"100%",display:"flex",flexDirection:"column"},calendar:{margin:"10px 0 50px 0"}},k=function(){return Object(a.jsxs)("div",{style:C.align,children:[Object(a.jsx)("div",{children:Object(a.jsx)("img",{src:N,alt:"calendar",style:C.calendar})}),Object(a.jsx)(S,{})]})},F=n(46),D=n.n(F),E=n(21),A=n(70),B=function(e){var t=e.crewdata,n=Object(c.useState)(null),s=Object(f.a)(n,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){setTimeout((function(){t.sort((function(e,t){return e.points<t.points})),o(t)}),300)}),[o,t]),Object(a.jsx)("div",{className:"leaderboard",style:{textAlign:"center"},children:i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("ul",{children:i.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{children:[e.username," : ",e.points]})},e.username)}))}),Object(a.jsx)("button",{onClick:function(){return e.onSubmit(!1)},children:"Close"})]})})},U=(n(162),function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).scrollToBottom=function(){a.messagesEnd.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},a.state={chats:[]},a.messagesEnd=s.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.database().ref(this.props.chatRefType).on("value",(function(t){var n=t.val(),a=[];for(var c in n)""!==n[c].message&&a.push({id:c,message:n[c].message,user:n[c].user,date:n[c].timestamp,isMe:n[c].user===e.props.currentUserName});var s=a;e.setState({chats:s})})),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"chatbox",style:{height:"450px",overflow:"auto"},children:[Object(a.jsx)("ul",{className:"chat-list",children:this.state.chats.map((function(e){new Date(e.date);return Object(a.jsx)("li",{children:Object(a.jsxs)("div",{className:e.isMe?"mymsg":"othermsg",children:[!e.isMe&&Object(a.jsx)("strong",{children:e.user+": "}),e.message]})},e.id)}))}),Object(a.jsx)("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})]})}}]),n}(s.a.Component)),I=(n(163),O.firestore()),L={background:{position:"fixed",zIndex:"1",width:"433px",height:"600px",backgroundColor:"rgba(0, 0, 0, 0.25)"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"}},P=function(e){var t=Object(c.useState)(""),n=Object(f.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(e.crew),r=Object(f.a)(o,2),l=r[0],d=r[1],u=Object(c.useState)([]),b=Object(f.a)(u,2),h=b[0],m=b[1],p=Object(c.useState)(""),x=Object(f.a)(p,2),g=x[0],w=x[1],v=Object(c.useState)(!1),y=Object(f.a)(v,2),S=y[0],N=y[1],C=Object(c.useState)([]),k=Object(f.a)(C,2),F=k[0],P=k[1],T=function(e){var t=e.item;return Object(a.jsxs)("article",{className:"mini-card",onClick:function(){return t.availability?_(t.crewID):void alert("Selected crew is full now!")},children:[Object(a.jsx)("div",{children:t.crewID}),Object(a.jsxs)("div",{children:[t.members.length," / ",t.member_limit," "]})]})},R=function(e){var t=e.list;return Object(a.jsx)(a.Fragment,{children:t.map((function(e){return Object(a.jsx)(T,{item:e},e.crewID)}))})},M=function(e){var t=I.collection("users"),n=[];I.collection("crews").doc(e).get().then((function(e){e.data().members.forEach((function(e){t.doc(e).get().then((function(e){return n.push({username:e.data().username,points:e.data().points})}))})),P(n),N(!S)}))},z=function(e){return Object(a.jsx)("div",{style:L.background,children:Object(a.jsx)("div",{style:L.popup,children:Object(a.jsx)(B,{onSubmit:e.closePopup,crewdata:e.crewdata})})})},_=function(e){var t=O.auth().currentUser;I.collection("users").doc(t.uid).update({crew:e}).then((function(){console.log("Document updated")})).catch((function(e){console.error("Error adding document: ",e)})),I.collection("crews").doc(e).update({members:O.firestore.FieldValue.arrayUnion(t.uid)}),d(e),w(e)};return Object(c.useEffect)((function(){return function(){var e=Object(A.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I.collection("crews").get().then((function(e){e.forEach((function(e){console.log(e.id," => ",e.data());var t=!0;e.data().member_limit===e.data().members.length&&(t=!1),m((function(n){return[].concat(Object(E.a)(n),[{crewID:e.data().crewid,member_limit:e.data().member_limit,members:e.data().members,availability:t}])}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),e.crew&&(w(e.crew),d(e.crew)),function(){}}),[]),!e.crew&&!l||g||w(e.crew),Object(a.jsxs)("div",{className:"home--container",children:[S&&Object(a.jsx)(z,{closePopup:N,crewdata:F}),e.user&&(l||e.crew)&&Object(a.jsxs)("div",{className:"allow-chat",children:[Object(a.jsx)("button",{onClick:function(){M(l)},children:"Go to Leaderboard"}),Object(a.jsx)(U,{chatRefType:g,currentUserName:e.user.displayName}),Object(a.jsx)("form",{className:"send-chat",onSubmit:function(t){if(t.preventDefault(),""!==s){var n=O.database().ref(g),a={message:s,user:e.user.displayName,timestamp:(new Date).getTime()};n.push(a),i("")}},children:Object(a.jsx)("input",{type:"text",name:"message",id:"message",value:s,onChange:function(e){i(e.target.value)},placeholder:"Leave a message..."})})]}),e.user&&!(l||e.crew)&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsx)(R,{list:h})}),!e.user&&Object(a.jsx)("div",{className:"disallow-chat",children:Object(a.jsxs)("p",{children:[Object(a.jsx)(j.b,{to:"/login",children:"Login"})," or ",Object(a.jsx)(j.b,{to:"/register",children:"Register"})," to start chatting!"]})})]})},T=n(119),R=n(120),M=n.n(R),z=(n(164),n(121));function _(){var e=Object(z.a)(["\ntext-align: center;\n.lds-ellipsis {\n  display: inline-block;\n  position: relative;\n  width: 80px;\n  height: 80px;\n}\n.lds-ellipsis div {\n  position: absolute;\n  top: 33px;\n  width: 13px;\n  height: 13px;\n  border-radius: 50%;\n  background: #222;\n  animation-timing-function: cubic-bezier(0, 1, 1, 0);\n}\n.lds-ellipsis div:nth-child(1) {\n  left: 8px;\n  animation: lds-ellipsis1 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(2) {\n  left: 8px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(3) {\n  left: 32px;\n  animation: lds-ellipsis2 0.6s infinite;\n}\n.lds-ellipsis div:nth-child(4) {\n  left: 56px;\n  animation: lds-ellipsis3 0.6s infinite;\n}\n@keyframes lds-ellipsis1 {\n  0% {\n    transform: scale(0);\n  }\n  100% {\n    transform: scale(1);\n  }\n}\n@keyframes lds-ellipsis3 {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n@keyframes lds-ellipsis2 {\n  0% {\n    transform: translate(0, 0);\n  }\n  100% {\n    transform: translate(24px, 0);\n  }\n}\n"]);return _=function(){return e},e}var W=n(122).a.div(_()),G=function(){return Object(a.jsx)(W,{children:Object(a.jsxs)("div",{className:"lds-ellipsis",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})},Y=(n(165),function(e){var t=Object(c.useState)("Default Title"),n=Object(f.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),r=Object(f.a)(o,2),l=r[0],d=r[1];return Object(c.useEffect)((function(){var t;void 0!==(t=e.info.data).title&&i(t.title),function(e){void 0!==e.imgPath&&d(e.imgPath)}(e.info.data)}),[]),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-md-12 px-0",children:Object(a.jsxs)("div",{className:"rounded-lg overflow-hidden",children:[Object(a.jsx)(j.c,{to:{pathname:"/post/detail",state:e.info},children:Object(a.jsx)("img",{src:l,alt:e.info.id,className:"img-fluid"})}),Object(a.jsxs)("div",{className:"postDescription",children:[s,Object(a.jsxs)("span",{className:"postlikes",children:["\u2665",e.info.data.whoLikes.length]})]})]})})})}),V=n(299),H=function(){var e=Object(c.useState)([]),t=Object(f.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)([]),o=Object(f.a)(i,2),r=o[0],l=o[1],d=Object(c.useState)(!0),u=Object(f.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(0),p=Object(f.a)(m,2),x=p[0],g=p[1];Object(c.useEffect)((function(){w()}),[]);var w=function(){O.firestore().collection("posts").get().then((function(e){var t=[];e.forEach((function(e){t.push({id:e.id,data:e.data()})})),t.sort((function(e,t){return e.data.timestamp>t.data.timestamp?-1:e.data.timestamp<t.data.timestamp?1:0})),console.log("ALL : ",t),l(t);var n,a=10*x;t.length>=a+10?(n=t.slice(a,a+10),s((function(e){return[].concat(Object(E.a)(e),Object(E.a)(n))})),g((function(e){return e+1})),console.log("loadPosts_IF : ",n)):(n=t.slice(a),s((function(e){return[].concat(Object(E.a)(e),Object(E.a)(n))})),h(!1),console.log("loadPosts_ELSE : ",n))}))};return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"container-SearchCreate",children:[Object(a.jsx)("div",{children:Object(a.jsxs)(j.c,{to:"/post/create",children:[" ",Object(a.jsx)(V.a,{className:"createButton",children:"Create"})," "]})}),Object(a.jsx)("div",{children:Object(a.jsx)("input",{placeholder:"Search",className:"searchBar",onChange:function(e){var t=r.filter((function(t){return t.data.title.toLowerCase().includes(e.target.value.toLowerCase())}));s(t),h(!1)}})})]}),Object(a.jsx)("div",{id:"scrollableDiv",className:"scroll-container",children:Object(a.jsx)("div",{className:"col-md-12",children:Object(a.jsx)(T.a,{scrollableTarget:"scrollableDiv",dataLength:n.length,next:w,hasMore:b,loader:Object(a.jsx)(G,{}),children:Object(a.jsx)(M.a,{breakpointCols:{default:2},className:"masonry-grid",columnClassName:"masonry-grid_column",children:n.map((function(e){return Object(a.jsx)(Y,{info:e},e.id)}))})})})})]})},J=(n(166),n.p+"static/media/demo_calendar.10b69a79.jpeg"),K={align:{textAlign:"center",height:"600px",width:"100%"}},X=function(){return Object(a.jsx)("div",{style:K.align,children:Object(a.jsx)("img",{src:J,className:"calendar_img",alt:""})})},Q={align:{textAlign:"center",height:"600px",width:"100%"}},q=function(){return Object(a.jsx)("div",{style:Q.align,children:"InfoPage"})},Z=n(301),$=n(303),ee=n(304),te=n(305),ne=n(306),ae=n(307),ce=n(308),se=(n(167),n.p+"static/media/wowo_logo.207fea00.png"),ie=O.firestore(),oe={fixSize:{height:"600px"},navigation:{backgroundColor:"#EEEEEE"}},re=function(e){var t,n=Object(c.useState)(null),s=Object(f.a)(n,2),i=s[0],o=s[1],r=Object(c.useState)(e.index||0),l=Object(f.a)(r,2),d=l[0],u=l[1];return e.user&&(t=e.user.uid,ie.collection("users").doc(t).get().then((function(e){null!=e.data().crew?o(e.data().crew):console.log("No such document!")})).catch((function(e){console.log("Error getting document:",e)}))),Object(a.jsx)(a.Fragment,{children:e.user&&Object(a.jsxs)(g.a,{lg:3.5,md:5.5,sm:7.5,children:[Object(a.jsxs)(w.a,{bg:"light",expand:"sm",align:"center",className:"navbar-custom",children:[Object(a.jsx)("a",{className:"navbar-brand",href:"/wowo-cs473/",children:Object(a.jsx)("div",{className:"logo-image",children:Object(a.jsx)("img",{src:se,className:"img-fluid"})})}),Object(a.jsx)(w.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(a.jsx)(w.a.Collapse,{id:"basic-navbar-nav",style:{flexDirection:"row"},children:Object(a.jsx)(v.a,{className:"ml-auto",children:Object(a.jsx)(v.a.Link,{onClick:function(){return O.auth().signOut()},href:"/wowo-cs473/login",children:"Logout"})})})]}),Object(a.jsx)(b.a,{path:"/wowo-cs473/main",component:k}),Object(a.jsx)(b.a,{path:"/wowo-cs473/crew",component:function(){return Object(a.jsx)(P,{user:e.user,crew:i})}}),Object(a.jsx)(b.a,{path:"/wowo-cs473/hunsu",component:H}),Object(a.jsx)(b.a,{path:"/wowo-cs473/calendar",component:X}),Object(a.jsx)(b.a,{path:"/wowo-cs473/info",component:q}),Object(a.jsxs)(Z.a,{style:oe.navigation,value:d,onChange:function(e,t){u(parseInt(t))},showLabels:!0,children:[Object(a.jsx)($.a,{component:j.b,to:"/wowo-cs473/main",label:"Main",value:"0",icon:Object(a.jsx)(ee.a,{})}),Object(a.jsx)($.a,{component:j.b,to:"/wowo-cs473/crew",label:"Crew",value:"1",icon:Object(a.jsx)(te.a,{})}),Object(a.jsx)($.a,{component:j.b,to:"/wowo-cs473/hunsu",label:"Hunsu",value:"2",icon:Object(a.jsx)(ne.a,{})}),Object(a.jsx)($.a,{component:j.b,to:"/wowo-cs473/calendar",label:"Calendar",value:"3",icon:Object(a.jsx)(ae.a,{})}),Object(a.jsx)($.a,{component:j.b,to:"/wowo-cs473/info",label:"Profile",value:"4",icon:Object(a.jsx)(ce.a,{})})]})]})})},le=n(44),de=(n(98),{fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}}),ue=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(le.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.password;O.auth().signInWithEmailAndPassword(n,c).then((function(e){a.props.history.push("/main")})).catch((function(e){a.setState({error:e})}))},a.state={email:"",password:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,c=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:de.fixSize,children:[Object(a.jsx)("h2",{style:de.margin,children:"Login your account"}),c&&Object(a.jsx)("p",{className:"error-message",children:c.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Enter password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",value:n,style:de.margin,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:de.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Don't have an account? ",Object(a.jsx)(j.b,{className:"register-btn",to:"/register",children:"Register here"})]})]})]})}}]),n}(s.a.Component),je=O.firestore(),be={fixSize:{height:"600px",width:"350px",borderColot:"black"},margin:{marginBottom:"40px"}},he=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState(Object(le.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,c=t.username,s=t.password,i=t.gender,o=t.birth;O.auth().createUserWithEmailAndPassword(n,s).then((function(){var e=O.auth().currentUser;e.updateProfile({displayName:c}).then((function(){je.collection("users").doc(e.uid).set({username:c,email:n,gender:i,birth:o,profileImgPath:"/ProfileImg/demoProfile.png",crew:null,points:0,createdAt:new Date}).then((function(){console.log("Document written")})).catch((function(e){console.error("Error adding document: ",e)})),a.props.history.push("/main")})).catch((function(e){a.setState({error:e})}))})).catch((function(e){a.setState({error:e})}))},a.state={username:"",email:"",password:"",gender:"",birth:"",error:null},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.username,c=e.password,s=e.gender,i=e.birth,o=e.error;return Object(a.jsxs)("div",{className:"auth--container",style:be.fixSize,children:[Object(a.jsx)("h2",{style:be.margin,children:"Register your account"}),o&&Object(a.jsx)("p",{className:"error-message",children:o.message}),Object(a.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",id:"username",value:n,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(a.jsx)("input",{type:"text",name:"email",id:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"password",children:"Choose a password"}),Object(a.jsx)("input",{type:"password",name:"password",id:"password",style:be.margin,value:c,onChange:this.handleChange}),Object(a.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(a.jsxs)("select",{value:s,onChange:this.handleChange,children:[Object(a.jsx)("option",{value:"Female",children:"Female"}),Object(a.jsx)("option",{value:"Male",children:"Male"})]}),Object(a.jsx)("label",{htmlFor:"birth",children:"Birth (YYMMDD)"}),Object(a.jsx)("input",{type:"text",name:"birth",id:"birth",value:i,onChange:this.handleChange}),Object(a.jsx)("button",{className:"general-submit",style:be.margin,children:"Get Started"}),Object(a.jsxs)("p",{children:["Already have an account? ",Object(a.jsx)(j.b,{className:"login-btn",to:"/login",children:"Login here"})]})]})]})}}]),n}(s.a.Component),me=n(76),pe=n.n(me),xe=(n(272),n(273),function(){var e=Object(c.useState)(""),t=Object(f.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(""),o=Object(f.a)(i,2),r=o[0],l=o[1],d=Object(c.useState)(""),u=Object(f.a)(d,2),b=u[0],h=u[1],m=Object(c.useState)(""),p=Object(f.a)(m,2),x=p[0],g=p[1],w=Object(c.useState)(""),v=Object(f.a)(w,2),y=v[0],S=v[1],N=Object(c.useState)("https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/wowo_logo.png?alt=media&token=fc8dfa4e-777f-4746-9aa0-cca5268e7008"),C=Object(f.a)(N,2),k=C[0],F=C[1],E=O.database(),B=O.firestore(),U=O.auth().currentUser;B.collection("users").doc(U.uid).get().then((function(e){console.log("user : ",e.data().username),S(e.data().username)}));var I=O.firestore.FieldValue.increment(2),L=function(){var e=Object(A.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n,void 0!==(t=r)&&""!==t){e.next=5;break}return alert("Write the title"),e.abrupt("return");case 5:B.collection("users").doc(U.uid).get().then((function(e){B.collection("users").doc(U.uid).update({points:I}),E.ref().child(e.data().crew).push({message:y+" wrote a new post / Title : "+r,user:"system",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),O.firestore().collection("posts").add({writer:y,title:t,content:a,imgPath:k,timestamp:new Date,whoLikes:[],comments:[]}).then((function(e){console.log("New Post Created : ",e.id),alert("You got 2 points!"),window.location.href="/hunsu"})).catch((function(e){console.log("New Posting Failed : ",e),alert("Posting Failed")}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=null;return P=""!==b?Object(a.jsx)("img",{className:"profile_preview",src:x,alt:r}):Object(a.jsxs)("div",{className:"empty",children:[" ",Object(a.jsx)("br",{})," ",Object(a.jsx)("br",{})," Click to upload image"]}),Object(a.jsxs)("div",{className:"create",children:[Object(a.jsx)("h4",{children:"Create New Posts!"}),Object(a.jsx)("h5",{className:"description",children:"Title"}),Object(a.jsx)("input",{type:"text",className:"title",onChange:function(e){l(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h5",{className:"description",children:"Image"}),Object(a.jsx)("label",{htmlFor:"input",className:"img-holder",children:P}),Object(a.jsx)("input",{id:"input",type:"file",accept:"image/jpg, image/png, image/jpeg, image/gif",name:"image-upload",onChange:function(e){e.preventDefault();var t=new FileReader,n=b,a=e.target.files[0];t.onloadend=function(){h(a),g(t.result),O.storage().ref("postImages").child(a.name).put(a).then((function(e){e.ref.getDownloadURL().then((function(e){F(e)}))}))},void 0!==a?t.readAsDataURL(a):(h(n),alert("Canceled changing image"),console.log(b))}}),Object(a.jsx)("h5",{className:"description",children:"Content"}),Object(a.jsx)(pe.a,{theme:"bubble",className:"editor",value:n,onChange:s})]}),Object(a.jsxs)("div",{className:"buttonContainer",children:[Object(a.jsx)(V.a,{onClick:L,className:"button",children:" Save "}),Object(a.jsxs)(j.c,{to:"/hunsu",children:[" ",Object(a.jsx)(V.a,{className:"button",children:" Quit "})," "]})]})]})}),Oe=n(27),fe=(n(274),n(319)),ge=n(309),we=n(312),ve=n(310),ye=n(317),Se=n(311),Ne=n(82),Ce=n(132),ke=n.n(Ce),Fe=n(133),De=n.n(Fe),Ee=n(318),Ae=n(134),Be=n.n(Ae),Ue=n(9),Ie=n(131),Le=n.n(Ie),Pe=function(e){var t=Object(c.useState)(""),n=Object(f.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(""),r=Object(f.a)(o,2),l=r[0],d=r[1],u=Object(c.useState)(""),j=Object(f.a)(u,2),b=j[0],h=j[1],m=Object(c.useState)(""),p=Object(f.a)(m,2),x=p[0],g=p[1],w=Object(c.useState)(""),v=Object(f.a)(w,2),y=v[0],S=v[1],N=Object(c.useState)((new Date).toString()),C=Object(f.a)(N,2),k=C[0],F=C[1],D=Object(c.useState)(""),A=Object(f.a)(D,2),B=A[0],U=A[1],I=Object(c.useState)(""),L=Object(f.a)(I,2),P=L[0],T=L[1],R=Object(c.useState)(!1),M=Object(f.a)(R,2),z=M[0],_=M[1],W=Object(c.useState)([]),G=Object(f.a)(W,2),Y=G[0],V=G[1],H=Object(c.useState)([]),J=Object(f.a)(H,2),K=J[0],X=J[1],Q=O.firestore().collection("posts");Object(c.useEffect)((function(){O.firestore().collection("users").doc(O.auth().currentUser.uid).get().then((function(e){console.log("user : ",e.data().username),U(e.data().username),T(e.data().crew)})),Q.doc(e.location.state.id).get().then((function(e){i(e.id),d(e.data().writer[0].toUpperCase()),h(e.data().title),g(e.data().content),S(e.data().imgPath),F(e.data().timestamp.toDate().toString().slice(0,15)),X(e.data().whoLikes);for(var t=e.data().comments,n=function(){var e=t[a],n={authorUrl:e.authorUrl,avatarUrl:e.avatarUrl,createdAt:e.createdAt.toDate(),fullName:e.fullName,text:e.text};V((function(e){return[].concat(Object(E.a)(e),[n])}))},a=0;a<t.length;a++)n()}))}),[]);var q={btn:function(e){return Object(Oe.a)(Object(Oe.a)({},e),{},{background:"#123456"})},comment:function(e){return Object(Oe.a)({},e)},textarea:function(e){return Object(Oe.a)({},e)}};return Object(a.jsxs)("div",{style:{height:"600px",width:"350px",borderColot:"black"},children:[Object(a.jsxs)(fe.a,{className:"root",children:[Object(a.jsx)(ge.a,{avatar:Object(a.jsxs)(ye.a,{className:"avatar",children:[" ",l," "]}),title:Object(a.jsx)("span",{className:"title",children:b}),subheader:Object(a.jsx)("span",{className:"createdAt",children:Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"postdetailcrewname",children:P}),Object(a.jsx)("div",{className:"postdetailtimestamp",children:k})]})})}),Object(a.jsx)("img",{src:y,alt:s,className:"img-fluid"}),Object(a.jsxs)(ve.a,{disableSpacing:!0,children:[K.includes(B)?Object(a.jsx)(Se.a,{"aria-label":"remove from favorites",onClick:function(){var t=K.filter((function(e){return e!==B}));console.log("Removed ARRAY: ",t),X(t),Q.doc(e.location.state.id).update({whoLikes:t})},children:Object(a.jsx)(ke.a,{})}):Object(a.jsx)(Se.a,{"aria-label":"add to favorites",onClick:function(){console.log("push like : ",B),Q.doc(e.location.state.id).update({whoLikes:[].concat(Object(E.a)(K),[B])}),X((function(e){return[].concat(Object(E.a)(e),[B])}))},children:Object(a.jsx)(De.a,{})}),K.length,Object(a.jsx)(Se.a,{className:Object(Ue.a)("expand",{expandOpen:z}),onClick:function(){_(!z)},"aria-expanded":z,"aria-label":"show more",children:Object(a.jsx)(Be.a,{})})]}),Object(a.jsx)(Ee.a,{in:z,timeout:"auto",unmountOnExit:!0,children:Object(a.jsx)(we.a,{children:Object(a.jsx)(Ne.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(a.jsx)(pe.a,{theme:"bubble",className:"editor",value:x,readOnly:!0})})})})]}),Object(a.jsx)("div",{className:"commentBlock",style:{height:"300px",width:"100%",overflow:"auto"},children:Object(a.jsx)("div",{className:"realcomments",children:Object(a.jsx)(Le.a,{comments:Y,signinUrl:"/login",isLoggedIn:!0,styles:q,onSubmit:function(t){t.length>0?(!function(t){var n={authorUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",avatarUrl:"https://firebasestorage.googleapis.com/v0/b/wowo-cs473.appspot.com/o/amongus.jpg?alt=media&token=8bf3207b-2603-4f17-9350-09b852858a51",createdAt:new Date,fullName:B+" - "+P,text:t};V([].concat(Object(E.a)(Y),[n])),Q.doc(e.location.state.id).update({comments:[].concat(Object(E.a)(Y),[n])})}(t),console.log("submit:",t)):alert("No comments written")}})})})]})},Te=n(137),Re=n(135),Me={background:{position:"fixed",zIndex:"1",width:"400px",height:"700px",backgroundColor:"rgba(0, 0, 0, 0.25)",textAlign:"center"},popup:{display:"flex",flexDirection:"column",backgroundColor:"white",position:"absolute",top:"20%",left:"10%",width:"80%",padding:"20px",borderRadius:"5px"},upload:{border:"1px solid lightGrey",padding:"10px 10px 10px 10px",marginTop:"10px",marginBottom:"10px",backgroundColor:"#EEEEEE"},btnShare:{width:"100%",marginTop:"10px",marginBottom:"5px",background:"#41ABFF",borderColor:"none",color:"white"},btnCancel:{width:"100%",background:"white",borderColor:"#41ABFF",color:"#41ABFF"}},ze=O.firestore(),_e=O.database(),We=function(e){var t=O.auth().currentUser,n=parseInt(e.timeSpent/1e3/60/60),c=parseInt(e.timeSpent/1e3/60),s=parseInt(e.timeSpent/1e3),i="[SYSTEM] "+t.displayName+" worked out for "+function(e,t,n){var a=n+" sec.";return 0===e&&0===t?a:0===e?t+" min "+a:e+" hour "+t+" min "+a}(n,c,s);return Object(a.jsx)("div",{style:Me.background,children:Object(a.jsxs)("div",{style:Me.popup,children:[Object(a.jsx)("h2",{children:"Great Job!"}),Object(a.jsx)("div",{children:"Would you share this exercise record with your Crew?"}),Object(a.jsx)("div",{style:Me.upload,children:i}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(a.jsx)(j.c,{to:"/crew",children:Object(a.jsx)(V.a,{style:Me.btnShare,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e),ze.collection("users").doc(t.uid).update({workoutHistory:O.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){ze.collection("users").doc(t.uid).get().then((function(e){console.log("find it!: ",e.data()),_e.ref().child(e.data().crew).push({message:i,user:"system",timestamp:(new Date).getTime()})})).catch((function(e){console.error("Error getting document: ",e)})),console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Share"})}),Object(a.jsx)(j.c,{to:"/main",children:Object(a.jsx)(V.a,{style:Me.btnCancel,onClick:function(){e.handleSubmit(!1),console.log("this is props: ",e);var t=O.auth().currentUser;ze.collection("users").doc(t.uid).update({workoutHistory:O.firestore.FieldValue.arrayUnion({timestamp:e.timestamp,duration:e.timeSpent})}).then((function(){console.log("Adding document")})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Cancel"})})]})]})})},Ge={stopwatch:{fontStyle:"italic",fontSize:"50px",fontWeight:"bold",marginTop:"200px"},beforeMargin:{marginTop:"20vh"},afterMargin:{marginTop:"50vh"},doneButton:{width:"150px",height:"150px",padding:"10px 10px",borderRadius:"100px",borderWidth:"2px",backgroundColor:"#41ABFF",fontSize:"20px",fontWeight:"bold",fontStyle:"italic",color:"#FFFFFF"},fixSize:{height:"600px",width:"100%",textAlign:"center"}},Ye=function(e){var t=Object(c.useState)(0),n=Object(f.a)(t,2),s=n[0],i=n[1],o=Object(c.useState)(!1),r=Object(f.a)(o,2),l=r[0],d=r[1],u=(new Date).getTime();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{lg:4,md:6,sm:8,children:Object(a.jsxs)("div",{style:Ge.fixSize,children:[!l&&Object(a.jsx)(Re.a,{seconds:0,minutes:0,hours:0,render:function(e){var t=e.formatted;return Object(a.jsx)("div",{style:Ge.stopwatch,children:t})}}),Object(a.jsx)(Te.a,{to:"/main",children:Object(a.jsx)("button",{type:"button",className:"btn",style:l?Object(Oe.a)(Object(Oe.a)({},Ge.doneButton),Ge.afterMargin):Object(Oe.a)(Object(Oe.a)({},Ge.doneButton),Ge.beforeMargin),onClick:function(){d(!0),i((new Date).getTime()-u)},children:"Done!"})})]})}),l&&Object(a.jsx)(We,{handleSubmit:d,timestamp:u,timeSpent:s})]})},Ve=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={user:null},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.onAuthStateChanged((function(t){t&&e.setState({user:t})}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(j.a,{children:Object(a.jsx)(h.a,{fluid:!0,children:Object(a.jsxs)(m.a,{className:"justify-content-sm-center",children:[this.state.user&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/wowo-cs473/post/create",exact:!0,component:xe}),Object(a.jsx)(b.a,{path:"/wowo-cs473/post/detail",exact:!0,component:Pe}),Object(a.jsx)(b.a,{path:"/wowo-cs473/main/workout",exact:!0,component:Ye}),Object(a.jsx)(b.a,{path:"/wowo-cs473/",render:function(){return Object(a.jsx)(re,{user:e.state.user,index:e.props.index})}})]})}),!this.state.user&&Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{path:"/wowo-cs473/login",exact:!0,component:ue}),Object(a.jsx)(b.a,{path:"/wowo-cs473/register",exact:!0,component:he}),Object(a.jsx)(b.a,{path:"/wowo-cs473/",exact:!0,component:ue})]})]})})})}}]),n}(s.a.Component);o.a.render(Object(a.jsx)(j.a,{children:Object(a.jsx)(Ve,{})}),document.getElementById("root"))},98:function(e,t,n){}},[[276,1,2]]]);
//# sourceMappingURL=main.08f41232.chunk.js.map